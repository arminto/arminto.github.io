<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="article">
<meta property="og:title" content="JenKins">
<meta property="og:url" content="http://example.com/2021/06/06/JenKins/index.html">
<meta property="og:site_name" content="LEMON">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7vv7weaqj30m308ymyv.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7vvg7grrj60ms0g7whk02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7vvkgypqj30mx0gdq60.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7vvt4e62j31530o0e81.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7vywjp4tj313l0dbafh.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7vz486idj30y007badx.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7vzjg8mmj30ie06wadv.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7vzs4h4dj30rk09pdi7.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7vzy8xfqj30oc0710t1.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w055o5xj30oe0acgm1.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w0avel7j30mu09zgm0.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w0gw4avj30mx0a50t9.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w0lw9gfj30lr07cdg7.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w0s87nwj30mz022mx1.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w0ynh18j30ml00zdfu.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w14aq1sj30mq01p3yq.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w19vv3hj30n10crgok.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w1hdbi2j30n601o0sl.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w1pyvbyj30mt02tmxr.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w1v394pj30n00fswhx.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w26ibhnj60m10ccn0r02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w2cbcmij60n603zq2y02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w2hz156j30mv0h6wie.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w2nnn8uj30mz01sglh.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w2vmtctj60mr00ywea02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w315vmzj30ow00uq2s.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w379m75j30x50fk0zj.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w3dvznzj30zw0jmjt7.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w3izpebj30r50g1aab.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w3pzu1nj30zw0pcac6.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w3ust5mj310f0pcgnh.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w3zdwccj30zx0pc40r.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w46e5ksj30v60kagmz.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w4b3htuj30v60aegn3.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w4eu6hvj310c0m9abg.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w4ijac3j310f0mbac4.jpg">
<meta property="og:image" content="http://example.com/2021/06/06/JenKins/GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520151538386.png">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w4nmahfj30oa03gglq.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w4ybekxj30v60a7zky.jpg">
<meta property="og:image" content="http://example.com/2021/06/06/JenKins/GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520152258943.png">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w5bburej30v60j6taw.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w5ewlldj310f0jp405.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w5j109qj30v60iitaf.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w5nb5n2j30v606pmxo.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w5r00urj310f0drwfo.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w60ls62j30ri0c1wfb.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w6724phj60sx0i2dh802.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w6ehya8j30p80gmmx7.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w6mdkdvj30qk03c3yk.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w6rp65rj30p80c30u5.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w6wpgn7j30qu046wer.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7293p1j30fe09hq3u.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7acrn5j30pu0b9t9j.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7gg6q8j30pu0bgwf9.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7nh2ojj310z0hgabh.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7rpppzj311y0amwex.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7wp1u3j30my05atas.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w823n3ej30vo0auq3p.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w86o34mj30zb0m5mye.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w8bsvatj315q0lltat.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w8fy6rnj30tr07rjrr.jpg">
<meta property="og:image" content="http://example.com/2021/06/06/JenKins/GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520164838332.png">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w8tqzznj30qr078aa1.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w91kjsej60un0akaaa02.jpg">
<meta property="og:image" content="http://example.com/2021/06/06/JenKins/GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520165404742.png">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w99hpx5j30zn05jt8s.jpg">
<meta property="og:image" content="http://example.com/2021/06/06/JenKins/GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200505160239790.png">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w9f53ilj30yo01vt8i.jpg">
<meta property="og:image" content="http://example.com/2021/06/06/JenKins/GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520165542652.png">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w9kqzn7j30r008zglt.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w9umg1fj30sh08p0t6.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7w9y7t5mj30yw0h13zq.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wa69ny7j30pe01bmwx.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wadp3h1j30vb05bjrr.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7waspon7j30qo0a175f.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wawzffoj30zk0b2q39.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wb75mrqj30pw0cbt9f.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wbg3lepj30x20fb0to.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wbo1y5vj30ri06zdga.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wbv5vcsj30pw0kbwfg.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wc3kn9bj30zn0cg750.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wc96s6rj30qy0jet9d.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wcnv69wj30a40eh74c.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wd6e4k7j30a90ejjrg.jpg">
<meta property="og:image" content="http://example.com/2021/06/06/JenKins/GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520171340537.png">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wdly1sij312c0g63zo.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wdsdyikj30qo09zq3n.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7we1ebfaj315r0dw0tt.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7web7kmfj30zn062jrm.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7weejxbpj30z10hvta6.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wenapjcj30s201bq2p.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wesj1k6j30gv07x0tc.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7weyyzg5j30wi087dg6.jpg">
<meta property="og:image" content="http://example.com/2021/06/06/JenKins/GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520175513606.png">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wf470x6j30yv08u0tm.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wf75k9dj612u08ht9f02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wfcylltj30pm07lq32.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wfiqzmdj315r0k5gnm.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wfqpmopj30ri08laa8.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wfxlu80j30rf0htmy5.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wg3d0u8j315r0kb40m.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wg66lj4j315r0kb40m.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wgcmda7j30z30940sv.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wgjq5psj30yb0dlgm0.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wgpt30pj315r0jtdi9.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wgva9g6j30po05qgly.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wh0ikuij30z30ob3ze.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7whbzlt1j30qb0l4q44.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7whnmsbvj314t08xdgk.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7whxy735j30rj090q37.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wi40347j314t0nw777.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wiad184j30x009xaae.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wifozu1j314t0b90to.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wik8trhj30y50h00tf.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wiq00akj30x70ej74t.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wivgf3bj30q309vjs3.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wj5gf13j314t08o750.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wjajvzkj30pd0ju0tz.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wjiczujj30oe04daa4.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wjowd86j30oe03xmx6.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wjw2d2pj30qm07caac.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wk8dfj0j30ri0npgmm.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wkfp027j30ri0odmz6.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wko5yn1j30ri0ob74q.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wkwzcf7j30ri0oct9g.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wl6eaocj30ri09wgm0.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wlbzuvjj60vp06idgl02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wlmvxgvj30um0na3z2.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wlvpc4mj30po0e4mxj.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wm3okwvj30v80ds0uf.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wm7acnzj30vp0aamxp.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wmddkzzj30ny063dfu.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wmmz3ckj30u90egq3d.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wmrlwv7j31160gn0u2.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wn5rpgzj31d00oenh3.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wngfg65j30u80m3tbx.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wnmejhwj30tz04rdfv.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wns3q76j30z50nqdhc.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wnwrj0sj30y40e9gsq.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wnzklkbj30vy0i40u3.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wo6z7ubj30sm0m5mzn.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7woct8rnj60sl0gfgm902.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wogdbu1j30te0783yz.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7woj4c18j30sn0mp0u6.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7worz5akj313c0lu0v5.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wovrd6kj30tj09674j.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wp2wr9kj313n0k5gnb.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wp74zkbj30sm0i6myb.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wpbaje8j60s002djre02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wphbqm9j313t0howg9.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wpoehy1j30tz0g3wfw.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wq1mqruj60qu0ijgn302.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wq91qa6j313t0ir40s.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wqe1wgjj30sf0mltbl.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wqiuz6dj30y80d6t9w.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wqrqpqxj30z20ao3zf.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wqv308bj30zp0akt9m.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wqydqqgj313s0q91kx.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wr4spf9j30ux0ik0un.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wradm4yj30rz0i73yy.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wrktsraj313t04bglo.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wrpf7g3j30ss0hdtah.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wrw3c3fj30pd0b10tf.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7ws6hj45j30sf0bvq43.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wsalqr0j313t0pfnpb.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wshh486j30we0gtmz0.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wslshm1j30sd0obabo.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wst8oioj30ma0bvdge.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wt0qol4j30ma0blmxt.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wt5zaatj30sm0o9t9y.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtecmnyj30sf0dtwfn.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wthhnflj60sf0b1wfi02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtkvveyj313t0kde2o.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtpwwoqj30uh09yq4d.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtsu67ij30th088t9t.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtw47k3j30vj088ab6.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtzqubmj30sf0dymy5.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wuadd2vj30q00auglx.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wuh8f1sj30w506jmya.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wukgpytj30tk04yq3e.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wuo6tr8j30u904wwey.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wusus6nj30s60o4myk.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wuzh3euj30x10hxjtt.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wv443abj30sf0m2tas.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wv7w5nvj30sf0e53zf.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wveu3huj30sf0luq4r.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wvs4yqtj30sf0f00tu.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wvvpqhaj30sf0f6t9v.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wvyxmsbj30sf0ftq46.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7ww38fy0j60u306kjs602.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7ww6x7b6j30th06mmxy.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwb57d6j60sf0flwfi02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwed4lhj60sf0a0gly02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwi67i9j30tn04ywex.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwlzzikj30tn04z3yy.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwsxypdj313t052jri.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwwr0i4j313t0hy40s.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wx4ormhj313c0c10u1.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wx46jl9j313t0c4ac7.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wx9v2i6j313c0no40s.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wxevzwrj60or01fdfm02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wxlgnnsj61050nkq4x02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wxpspj5j314b0b875d.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7wxve23zj30qu04rq2x.jpg">
<meta property="article:published_time" content="2021-06-05T17:04:26.000Z">
<meta property="article:modified_time" content="2021-06-05T17:44:34.775Z">
<meta property="article:author" content="Armin">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tva1.sinaimg.cn/large/008i3skNly1gr7vv7weaqj30m308ymyv.jpg">

<link rel="canonical" href="http://example.com/2021/06/06/JenKins/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>JenKins | LEMON</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">LEMON</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">死记性不如烂笔头</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/06/JenKins/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Armin">
      <meta itemprop="description" content="记录生活中的点点滴滴">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LEMON">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JenKins
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-06-06 01:04:26 / 修改时间：01:44:34" itemprop="dateCreated datePublished" datetime="2021-06-06T01:04:26+08:00">2021-06-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
      
        <!--toc-->
<span id="more"></span>

<h1 id="GitLab-Jenkins-基本过程"><a href="#GitLab-Jenkins-基本过程" class="headerlink" title="GitLab + Jenkins 基本过程"></a>GitLab + Jenkins 基本过程</h1><h2 id="一、持续集成、持续交付、持续部署"><a href="#一、持续集成、持续交付、持续部署" class="headerlink" title="一、持续集成、持续交付、持续部署"></a>一、持续集成、持续交付、持续部署</h2><h3 id="1-概述："><a href="#1-概述：" class="headerlink" title="1. 概述："></a>1. 概述：</h3><ul>
<li>软件开发周期中需要一些可以帮助开发者提升速度的自动化工具。其中工具最重要的目的是促进软件项目的持续集成与交付。通过CI/CD工具，开发团队可以保持软件更新并将其迅速的投入实践中。CI/CD也被认为是敏捷开发的最重要实践。</li>
</ul>
<h3 id="2-持续集成-CI"><a href="#2-持续集成-CI" class="headerlink" title="2. 持续集成(CI)"></a>2. 持续集成(CI)</h3><p><strong>概述：</strong>【<strong>持续集成指的是，频繁地（一天多次）将代码集成到主干</strong>】</p>
<ul>
<li><p>持续集成（Continuous integration，简称CI），一种软件开发实践，即团队开发成员经常集成他们的工作，通过每个成员每天至少集成一次，也就意味着每天可能会发生多次集成。每次集成都通过自动化的构建 (包括推送代码，自动化集成，自动化测试，返回结果) 来验证，从而尽早地发现集成错误。</p>
</li>
<li><p>整体流程：推送代码  – &gt; 集成代码 – &gt; 构建 –&gt; 代码测试 – &gt; 反馈结果</p>
</li>
<li><p>持续集成的最终目的就是 让产品可以快速迭代，同时还能保持高质量，简化工作流程</p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7vv7weaqj30m308ymyv.jpg" alt="image-20200519112017013"></p>
<h3 id="3-持续交付-CD"><a href="#3-持续交付-CD" class="headerlink" title="3. 持续交付(CD)"></a>3. 持续交付(CD)</h3><p><strong>概述：</strong>【<strong>持续 将通过持续集成后的代码进行手动部署</strong>】</p>
<ul>
<li><p>持续交付（Continuous Delivery, CD）是一种软件工程的手段，让软件在短周期内产出，确保软件随时可以被可靠地发布。其目的在于更快、更频繁地构建、测试以及发布软件。通过加强对生产环境的应用进行渐进式更新，这种手段可以降低交付变更的成本与风险。一个简单直观的与可重复的部署过程对于持续交付来说是很重要的。</p>
</li>
<li><p>整体流程：推送代码 – &gt; 集成代码 – &gt; 构建 –&gt; 代码测试 — &gt; 反馈结果  –&gt; 测试 –&gt; 手动 –&gt; 部署到生产</p>
</li>
<li><p>持续交付指的是在持续集成后的环境基础之上，将代码部署到预生产环境上。</p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7vvg7grrj60ms0g7whk02.jpg" alt="image-20200519114326555"></p>
<h3 id="4-持续部署（CD）"><a href="#4-持续部署（CD）" class="headerlink" title="4. 持续部署（CD）"></a>4. 持续部署（CD）</h3><p><strong>概述：</strong>【**基于 集成 交付之上的，部署和交付的区别在于 ==无论何时 代码都是可以部署的 没有问题的==**】</p>
<ul>
<li><p>持续部署（Continuous Deployment，缩写为 CD）是持续交付的下一步，指的是代码通过评审以后，自动部署到生产环境；持续部署的目标是，代码在任何时刻都是可部署的，可以进入生产阶段。</p>
</li>
<li><p>持续部署指的是持续交付的下一步，指代码可以在任何时刻都是可以部署的 没问题的，最后部署到生产环境下的过程</p>
</li>
<li><p>整体流程：推送代码 – &gt; 集成代码 – &gt; 构建 –&gt; 代码测试 — &gt; 反馈结果  –&gt; 测试 –&gt; 自动 –&gt; 部署到生产</p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7vvkgypqj30mx0gdq60.jpg" alt="image-20200519114904256"></p>
<h3 id="5-集成-amp-交付软件"><a href="#5-集成-amp-交付软件" class="headerlink" title="5. 集成 &amp; 交付软件"></a>5. 集成 &amp; 交付软件</h3><p><strong>概述：</strong></p>
<ul>
<li>典型的部署流水线，CD 流水线由几个不同的阶段组成; 一个工具不能满足所有这些步骤。</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7vvt4e62j31530o0e81.jpg" alt="image-20200519115644610"></p>
<h2 id="二、Git版本控制器"><a href="#二、Git版本控制器" class="headerlink" title="二、Git版本控制器"></a>二、Git版本控制器</h2><h3 id="1-Git架构图"><a href="#1-Git架构图" class="headerlink" title="1. Git架构图"></a>1. Git架构图</h3><h3 id="2-四个区域和五种状态"><a href="#2-四个区域和五种状态" class="headerlink" title="2. 四个区域和五种状态"></a>2. 四个区域和五种状态</h3><h5 id="1-四个区域"><a href="#1-四个区域" class="headerlink" title="1. 四个区域"></a>1. 四个区域</h5><ul>
<li>工作区(Working Area)</li>
<li>暂存区(Stage)</li>
<li>本地仓库(Local Repository)</li>
<li>远程仓库(Remote Repository)</li>
</ul>
<h5 id="2-五种状态"><a href="#2-五种状态" class="headerlink" title="2. 五种状态"></a>2. 五种状态</h5><ul>
<li>未修改(Origin)</li>
<li>已修改(Modified)&amp;未追踪(Untracked)</li>
<li>已暂存(Staged)</li>
<li>已提交(Committed)</li>
<li>已推送(Pushed)</li>
</ul>
<h3 id="3-安装git"><a href="#3-安装git" class="headerlink" title="3. 安装git"></a>3. 安装git</h3><blockquote>
<p><strong>随便打开一台虚拟机用来练习git的使用</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git ~]<span class="comment"># yum -y install git</span></span><br></pre></td></tr></table></figure>



<h3 id="4-常见的-Git-命令："><a href="#4-常见的-Git-命令：" class="headerlink" title="4. 常见的 Git 命令："></a>4. 常见的 Git 命令：</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">开始一个工作区（参见：git <span class="built_in">help</span> tutorial）</span><br><span class="line">   <span class="built_in">clone</span>      克隆一个仓库到一个新目录</span><br><span class="line">   init       创建一个空的 Git 仓库或重新初始化一个已存在的仓库</span><br><span class="line"></span><br><span class="line">在当前变更上工作（参见：git <span class="built_in">help</span> everyday）</span><br><span class="line">   add        添加文件内容至索引</span><br><span class="line">   mv         移动或重命名一个文件、目录或符号链接</span><br><span class="line">   reset      重置当前 HEAD 到指定状态</span><br><span class="line">   rm         从工作区和索引中删除文件</span><br><span class="line"></span><br><span class="line">检查历史和状态（参见：git <span class="built_in">help</span> revisions）</span><br><span class="line">   bisect     通过二分查找定位引入 bug 的提交</span><br><span class="line">   grep       输出和模式匹配的行</span><br><span class="line">   <span class="built_in">log</span>        显示提交日志</span><br><span class="line">   show       显示各种类型的对象</span><br><span class="line">   status     显示工作区状态</span><br><span class="line"></span><br><span class="line">扩展、标记和调校您的历史记录</span><br><span class="line">   branch     列出、创建或删除分支</span><br><span class="line">   checkout   切换分支或恢复工作区文件</span><br><span class="line">   commit     记录变更到仓库</span><br><span class="line">   diff       显示提交之间、提交和工作区之间等的差异</span><br><span class="line">   merge      合并两个或更多开发历史</span><br><span class="line">   rebase     本地提交转移至更新后的上游分支中</span><br><span class="line">   tag        创建、列出、删除或校验一个 GPG 签名的标签对象</span><br><span class="line"></span><br><span class="line">协同（参见：git <span class="built_in">help</span> workflows）</span><br><span class="line">   fetch      从另外一个仓库下载对象和引用</span><br><span class="line">   pull       获取并整合另外的仓库或一个本地分支</span><br><span class="line">   push       更新远程引用和相关的对象</span><br></pre></td></tr></table></figure>



<h3 id="5-配置git"><a href="#5-配置git" class="headerlink" title="5. 配置git"></a>5. 配置git</h3><ul>
<li> <strong>你是谁，你的邮箱是什么。这样就知道是谁提交的代码了</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@git ~]<span class="comment"># git config --global user.name &quot;lemon&quot;                     #名字</span></span><br><span class="line">[root@git ~]<span class="comment"># git config --global user.email &quot;lemon_row@163.com&quot;        #邮箱</span></span><br><span class="line">[root@git ~]<span class="comment"># git config --global color.ui true                         #颜色</span></span><br></pre></td></tr></table></figure>



<h3 id="6-检查配置信息"><a href="#6-检查配置信息" class="headerlink" title="6. 检查配置信息"></a>6. 检查配置信息</h3><ul>
<li><strong>这个 <code>.gitconfig </code> 是在你当前的家目录下的一个隐藏文件</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@git ~]<span class="comment"># cat .gitconfig </span></span><br><span class="line">[user]</span><br><span class="line">	name = lemon</span><br><span class="line">	email = lemon_row@163.com</span><br><span class="line">[color]</span><br><span class="line">	ui = <span class="literal">true</span></span><br></pre></td></tr></table></figure>



<h3 id="7-基本使用案例"><a href="#7-基本使用案例" class="headerlink" title="7. 基本使用案例"></a>7. 基本使用案例</h3><h5 id="实战（一）git如何快速的提交目录文件至本地仓库？"><a href="#实战（一）git如何快速的提交目录文件至本地仓库？" class="headerlink" title="实战（一）git如何快速的提交目录文件至本地仓库？"></a>实战（一）git如何快速的提交目录文件至本地仓库？</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[root@git ~]<span class="comment"># mkdir project &amp;&amp; cd project    #创建git工作目录</span></span><br><span class="line">[root@git project]<span class="comment"># git init                 #初始化该目录为git本地仓库</span></span><br><span class="line">初始化空的 Git 版本库于 /root/project/.git/</span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># ls -a                   #初始化成功后会在该目录下生成一个.git的隐藏目录</span></span><br><span class="line">.  ..  .git</span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># touch file&#123;1..3&#125;.txt     #创建三个文件</span></span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># ls</span></span><br><span class="line">file1.txt  file2.txt  file3.txt</span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># git status               #查看暂存区状态</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 初始提交</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 未跟踪的文件:</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git add &lt;file&gt;...&quot; 以包含要提交的内容）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#	file1.txt</span></span><br><span class="line"><span class="comment">#	file2.txt</span></span><br><span class="line"><span class="comment">#	file3.txt</span></span><br><span class="line">提交为空，但是存在尚未跟踪的文件（使用 <span class="string">&quot;git add&quot;</span> 建立跟踪）</span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># git add .                #将文件添加到暂存区</span></span><br><span class="line">[root@git project]<span class="comment"># git status               #查看暂存区状态</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 初始提交</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 要提交的变更：</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git rm --cached &lt;file&gt;...&quot; 撤出暂存区）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#	新文件：    file1.txt</span></span><br><span class="line"><span class="comment">#	新文件：    file2.txt</span></span><br><span class="line"><span class="comment">#	新文件：    file3.txt</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># git commit -m &quot;NOW 1 add --&gt; file1 file2 file3&quot;        #将其提交至本地仓库</span></span><br><span class="line">[master（根提交） 75b88ee] NOW 1 add --&gt; file1 file2 file3</span><br><span class="line"> 3 files changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 file1.txt</span><br><span class="line"> create mode 100644 file2.txt</span><br><span class="line"> create mode 100644 file3.txt</span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># git status</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line">无文件要提交，干净的工作区</span><br></pre></td></tr></table></figure>



<h5 id="实战（二）git-如何将文件改名并重新提交到本地仓库？"><a href="#实战（二）git-如何将文件改名并重新提交到本地仓库？" class="headerlink" title="实战（二）git 如何将文件改名并重新提交到本地仓库？"></a>实战（二）git 如何将文件改名并重新提交到本地仓库？</h5><ul>
<li><p><strong>分两种：</strong></p>
<ul>
<li>使用 <code>git mv</code> 命令（推荐使用）</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@git project]<span class="comment"># git mv file1.txt file.txt     #修改file.txt文件名为file1.txt</span></span><br><span class="line">[root@git project]<span class="comment"># ls</span></span><br><span class="line">file2.txt  file3.txt  file.txt</span><br><span class="line">  </span><br><span class="line">[root@git project]<span class="comment"># git status</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line"><span class="comment"># 要提交的变更：</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git reset HEAD &lt;file&gt;...&quot; 撤出暂存区）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#	重命名：    file1.txt -&gt; file.txt</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">[root@git project]<span class="comment"># git add .</span></span><br><span class="line">[root@git project]<span class="comment"># git status</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line"><span class="comment"># 要提交的变更：</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git reset HEAD &lt;file&gt;...&quot; 撤出暂存区）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#	重命名：    file1.txt -&gt; file.txt</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">[root@git project]<span class="comment"># git commit -m &quot;NOW 2 rename file1 --&gt; file.txt&quot;</span></span><br><span class="line">[master dbff765] NOW 2 rename file1 --&gt; file.txt</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> rename file1.txt =&gt; file.txt (100%)</span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># git status</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line">无文件要提交，干净的工作区</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 <code>mv</code> 命令（不推荐使用）</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@git project]<span class="comment"># mv file.txt file1.txt    #修改file1.txt文件名为file.txt</span></span><br><span class="line">[root@git project]<span class="comment"># ls</span></span><br><span class="line">file2.txt  file3.txt  file.txt</span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># git status               #查看一下暂存区状态</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line"><span class="comment"># 尚未暂存以备提交的变更：</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git add/rm &lt;file&gt;...&quot; 更新要提交的内容）</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git checkout -- &lt;file&gt;...&quot; 丢弃工作区的改动）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#	删除：      file.txt</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 未跟踪的文件:</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git add &lt;file&gt;...&quot; 以包含要提交的内容）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#	file1.txt</span></span><br><span class="line">修改尚未加入提交（使用 <span class="string">&quot;git add&quot;</span> 和/或 <span class="string">&quot;git commit -a&quot;</span>）</span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># git rm file.txt</span></span><br><span class="line">rm <span class="string">&#x27;file.txt&#x27;</span></span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># git add file1.txt</span></span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># git status</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line"><span class="comment"># 要提交的变更：</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git reset HEAD &lt;file&gt;...&quot; 撤出暂存区）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#	重命名：    file.txt -&gt; file1.txt</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line">[root@git project]<span class="comment"># git commit -m &quot;NOW 3 rename file --&gt; file1.txt&quot;</span></span><br><span class="line">[master 6e97421] NOW 3 rename file --&gt; file1.txt</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> rename file.txt =&gt; file1.txt (100%)</span><br><span class="line"> </span><br><span class="line">[root@git project]<span class="comment"># git status</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line">无文件要提交，干净的工作区</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="实战（三）如何比对-工作目录文件内容、暂存区文件内容、本地仓库文件内容之间的差役？"><a href="#实战（三）如何比对-工作目录文件内容、暂存区文件内容、本地仓库文件内容之间的差役？" class="headerlink" title="实战（三）如何比对 工作目录文件内容、暂存区文件内容、本地仓库文件内容之间的差役？"></a>实战（三）如何比对 工作目录文件内容、暂存区文件内容、本地仓库文件内容之间的差役？</h5><ul>
<li><strong>使用 <code>git diff</code> 命令来 比对 工作目录文件内容 与 暂存区文件内容</strong></li>
<li><strong>使用 <code>git diff --cached</code> 命令来 比对 暂存区文件内容、本地仓库文件内容</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7vywjp4tj313l0dbafh.jpg" alt="image-20200520101936824"></p>
<p>1.工作区 <code>file1</code> 内容 与 暂存区 <code>file1</code> 内容比较之间的差异</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#给file1.txt文件加点内容 后并 提交到本地仓库</span></span><br><span class="line">[root@git project]<span class="comment"># echo &#x27;aaaaa&#x27; &gt;&gt; file1.txt </span></span><br><span class="line">[root@git project]<span class="comment"># git add .</span></span><br><span class="line">[root@git project]<span class="comment"># git commit -m &quot;NOW 4 read-in file1.txt --&gt; aaaaa&quot;</span></span><br><span class="line">[master 3485684] NOW 4 read-in file1.txt --&gt; aaaaa</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> </span><br><span class="line"><span class="comment">#给file1.txt文件加点内容 不提交</span></span><br><span class="line">[root@git project]<span class="comment"># echo &#x27;bbbbb&#x27; &gt;&gt; file1.txt </span></span><br><span class="line">[root@git project]<span class="comment"># git status</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line"><span class="comment"># 尚未暂存以备提交的变更：</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git add &lt;file&gt;...&quot; 更新要提交的内容）</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git checkout -- &lt;file&gt;...&quot; 丢弃工作区的改动）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#	修改：      file1.txt</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">修改尚未加入提交（使用 <span class="string">&quot;git add&quot;</span> 和/或 <span class="string">&quot;git commit -a&quot;</span>）</span><br><span class="line"></span><br><span class="line"><span class="comment">#工作区与暂存区比较差役</span></span><br><span class="line">[root@git project]<span class="comment"># git diff file1.txt</span></span><br><span class="line">diff --git a/file1.txt b/file1.txt</span><br><span class="line">index ccc3e7b..be4e668 100644</span><br><span class="line">--- a/file1.txt           <span class="comment">#表示变动前的版本</span></span><br><span class="line">+++ b/file1.txt           <span class="comment">#表示变动后的版本</span></span><br><span class="line">@@ -1 +1,2 @@</span><br><span class="line"> aaaaa</span><br><span class="line">+bbbbb                    <span class="comment">#加入的内容</span></span><br></pre></td></tr></table></figure>

<p>2.暂存区 <code>file1</code> 内容 与 本地仓库 <code>file1</code> 内容比较之间的差异</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将其修改的文件添加到暂存区中[root@git project]# git add .[root@git project]# git diff file1.txt[root@git project]# 这个时候可以看到，工作区 与 缓存区 已经保持抑一致了#暂存区与本地仓库比较差役[root@git project]# git diff --cached file1.txtdiff --git a/file1.txt b/file1.txtindex ccc3e7b..be4e668 100644--- a/file1.txt+++ b/file1.txt@@ -1 +1,2 @@ aaaaa+bbbbb#然后将其所有暂存区内容提交至本地仓库[root@git project]# git commit -m &quot;NOW 5 read-in file1.txt --&gt; bbbbb&quot;[master fdf30db] NOW 5 read-in file1.txt --&gt; bbbbb 1 file changed, 1 insertion(+)[root@git project]# [root@git project]# git diff --cached file1.txt[root@git project]# 此时可以看到，暂存区 与 本地仓库 已经保持抑一致了</span></span><br></pre></td></tr></table></figure>



<h5 id="实战（四）如何理解git-commit-提交操作？"><a href="#实战（四）如何理解git-commit-提交操作？" class="headerlink" title="实战（四）如何理解git  commit 提交操作？"></a>实战（四）如何理解git  commit 提交操作？</h5><ul>
<li><p><strong>可以将其理解为虚拟机的快照功能，简单来说就是每次commit就是相当于对文件做了一次快照。</strong></p>
</li>
<li><p><strong>FQ：知道了commit相当于快照后，那如何得知该文件快照了多少次  都修改了哪些内容呢？</strong></p>
</li>
<li><p><strong>答：使用 <code>git log</code> 或者 <code>git reflog</code> 查看历史的commit快照记录</strong></p>
</li>
<li><p><strong>但是这种查看方式，输出的信息太过多余，我们可以使用 <code>--oneline</code> 选项</strong></p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看历史的git commit快照[root@git project]# git logcommit fdf30db3870322636d06b79a74ed5feb399213ea      #commit的id编号（唯一的）Author: lemon &lt;lemon_row@163.com&gt;                    #是谁提交的Date:   Wed May 20 09:55:33 2020 +0800               #什么时间提交的    NOW 5 read-in file1.txt --&gt; bbbbb                #提交的信息描述commit 34856846ee0540482ab21a3df4bf821dd2329961Author: lemon &lt;lemon_row@163.com&gt;Date:   Wed May 20 09:51:53 2020 +0800    NOW 4 read-in file1.txt --&gt; aaaaacommit 2b1c545d923502f1bfd20c25a3f58ff8519a44f0Author: lemon &lt;lemon_row@163.com&gt;Date:   Wed May 20 09:50:12 2020 +0800    NOW 3 rename file --&gt; file1.txtcommit 0c943fc2c68773efea85a0ed0a26dcfbf973e351Author: lemon &lt;lemon_row@163.com&gt;Date:   Wed May 20 09:49:20 2020 +0800    NOW 2 rename file1 --&gt; file.txtcommit 75b88eeb1dc16a54b6da9419f5d8e872b900df0eAuthor: lemon &lt;lemon_row@163.com&gt;Date:   Wed May 20 09:46:46 2020 +0800    NOW 1 add --&gt; file1 file2 file3(END)##但是这种查看方式，输出的信息太过多余，我们可以使用--oneline选项[root@git project]# git log --onelinefdf30db NOW 5 read-in file1.txt --&gt; bbbbb3485684 NOW 4 read-in file1.txt --&gt; aaaaa2b1c545 NOW 3 rename file --&gt; file1.txt0c943fc NOW 2 rename file1 --&gt; file.txt75b88ee NOW 1 add --&gt; file1 file2 file3#还有git log -n 的方式，查看最近的n次快照[root@git project]# git log --oneline -2c652338 NOW 7 read-in file1 ---&gt; dddddf405afa NOW 6 read-in file1 ---&gt; ccccc</span></span><br></pre></td></tr></table></figure>



<h5 id="实战（五）git-保存了状态后，想回退怎么办？"><a href="#实战（五）git-保存了状态后，想回退怎么办？" class="headerlink" title="实战（五）git 保存了状态后，想回退怎么办？"></a>实战（五）git 保存了状态后，想回退怎么办？</h5><ul>
<li><strong>如果使用虚拟机的话，肯定想都不用想，直接还原快照就得了，那么 git 优势如何实现的呢？</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7vz486idj30y007badx.jpg" alt="image-20200520105129862"></p>
<p>1.如果本地工作目录修改文件错误像回退怎么办？【工作目录 与 暂存区的撤销】</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#误操作[root@git project]# &gt; file1.txt[root@git project]# git status# 位于分支 master# 尚未暂存以备提交的变更：#   （使用 &quot;git add &lt;file&gt;...&quot; 更新要提交的内容）#   （使用 &quot;git checkout -- &lt;file&gt;...&quot; 丢弃工作区的改动）##	修改：      file1.txt#修改尚未加入提交（使用 &quot;git add&quot; 和/或 &quot;git commit -a&quot;）#丢弃工作区的改动（恢复）[root@git project]# git checkout file1.txt[root@git project]# git status# 位于分支 master无文件要提交，干净的工作区[root@git project]# cat file1.txt aaaaabbbbb</span></span><br></pre></td></tr></table></figure>

<p>2.工作文件误操作提交至暂存区中该怎么办？</p>
<blockquote>
<p>使用 本地仓库 —  覆盖  —  暂存区  —  覆盖   —  工作仓库</p>
<p>git  reset  HEAD  文件名</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#误操作[root@git project]# &gt; file1.txt [root@git project]# git add .[root@git project]# git status# 位于分支 master# 要提交的变更：#   （使用 &quot;git reset HEAD &lt;file&gt;...&quot; 撤出暂存区）##	修改：      file1.txt[root@git project]# git reset HEAD file1.txt     #取消这个暂存区的内容重置后撤出暂存区的变更：M	file1.txt[root@git project]# git status# 位于分支 master# 尚未暂存以备提交的变更：#   （使用 &quot;git add &lt;file&gt;...&quot; 更新要提交的内容）#   （使用 &quot;git checkout -- &lt;file&gt;...&quot; 丢弃工作区的改动）##	修改：      file1.txt#修改尚未加入提交（使用 &quot;git add&quot; 和/或 &quot;git commit -a&quot;）[root@git project]# git checkout file1.txt[root@git project]# git status# 位于分支 master无文件要提交，干净的工作区[root@git project]# cat file1.txt aaaaabbbbb</span></span><br></pre></td></tr></table></figure>



<h5 id="实战（六）回滚版本，回滚之前的版本-和-回滚之后的版本"><a href="#实战（六）回滚版本，回滚之前的版本-和-回滚之后的版本" class="headerlink" title="实战（六）回滚版本，回滚之前的版本 和 回滚之后的版本"></a>实战（六）回滚版本，回滚之前的版本 和 回滚之后的版本</h5><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7vzjg8mmj30ie06wadv.jpg" alt="image-20200520105437645"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git project]<span class="comment"># echo &#x27;ccccc&#x27; &gt;&gt; file1.txt [root@git project]# git add .[root@git project]# git commit -m &quot;NOW 6 read-in file1 ---&gt; ccccc&quot;[root@git project]# echo &#x27;ddddd&#x27; &gt;&gt; file1.txt [root@git project]# git add .[root@git project]# git commit -m &quot;NOW 7 read-in file1 ---&gt; ddddd&quot;[root@git project]# cat file1.txt aaaaabbbbbcccccddddd#比如我就想回退到ccccc的版本（回滚之前的版本）[root@git project]# git log --onelinec652338 NOW 7 read-in file1 ---&gt; dddddf405afa NOW 6 read-in file1 ---&gt; ccccc            #使用前面第一段commit的id进行回滚操作fdf30db NOW 5 read-in file1.txt --&gt; bbbbb3485684 NOW 4 read-in file1.txt --&gt; aaaaa2b1c545 NOW 3 rename file --&gt; file1.txt0c943fc NOW 2 rename file1 --&gt; file.txt75b88ee NOW 1 add --&gt; file1 file2 file3[root@git project]# git reset --hard f405afa      #回滚HEAD 现在位于 f405afa NOW 6 read-in file1 ---&gt; ccccc#查看是否已经回到这个版本[root@git project]# git rev-parse HEADf405afac0930c1feb0ee86cfa8b4c6032afd4b69[root@git project]# cat file1.txtaaaaabbbbbccccc#但是，有个问题，此时我又想回到ddddd的版本怎么办？（回滚之后的版本）[root@git project]# git log --oneline    #这次会发现ddddd的版本消失了f405afa NOW 6 read-in file1 ---&gt; cccccfdf30db NOW 5 read-in file1.txt --&gt; bbbbb3485684 NOW 4 read-in file1.txt --&gt; aaaaa2b1c545 NOW 3 rename file --&gt; file1.txt0c943fc NOW 2 rename file1 --&gt; file.txt75b88ee NOW 1 add --&gt; file1 file2 file3#答：使用git reflog[root@git project]# git reflogf405afa HEAD@&#123;0&#125;: reset: moving to f405afac652338 HEAD@&#123;1&#125;: commit: NOW 7 read-in file1 ---&gt; ddddd           #这次就可以找到了f405afa HEAD@&#123;2&#125;: commit: NOW 6 read-in file1 ---&gt; cccccfdf30db HEAD@&#123;3&#125;: commit: NOW 5 read-in file1.txt --&gt; bbbbb3485684 HEAD@&#123;4&#125;: commit: NOW 4 read-in file1.txt --&gt; aaaaa2b1c545 HEAD@&#123;5&#125;: commit: NOW 3 rename file --&gt; file1.txt0c943fc HEAD@&#123;6&#125;: commit: NOW 2 rename file1 --&gt; file.txt75b88ee HEAD@&#123;7&#125;: commit (initial): NOW 1 add --&gt; file1 file2 file3[root@git project]# git reset --hard c652338                       #在进行回滚HEAD 现在位于 c652338 NOW 7 read-in file1 ---&gt; ddddd[root@lemon project01]# git rev-parse HEADc652338f12a5102e9691dce3ecac4f57cf19639e[root@git project]# cat file1.txt aaaaabbbbbcccccddddd</span></span><br></pre></td></tr></table></figure>



<h3 id="8-Git-标签的-创建-删除"><a href="#8-Git-标签的-创建-删除" class="headerlink" title="8. Git 标签的 创建 删除"></a>8. Git 标签的 创建 删除</h3><ul>
<li><em><strong>git 标签能起到什么作用？</strong></em><ul>
<li>当git仓库内的数据有改善或功能时，我们经常会打一个类似于软件版本号的tag标签，这样就能通过标签将版本库中的某个版本给记录下来，便于我们后续将特定时期的数据取出来用。</li>
<li>简单来说：标签也是一个版本库的一个快照，他与commit id 是绑定在一起的东西。</li>
</ul>
</li>
<li><em><strong>为什么要使用git标签？</strong></em><ul>
<li>既然都已经有了commit id了，为什么还要用tag标签？</li>
<li>因为commit的id号不容易使人记忆，所以，使用tag标签就是因为他好记 <code>v1.0.0</code></li>
<li>绝大部分公司都是基于标签进行对代码版本的管理</li>
</ul>
</li>
<li><em><strong>git 标签的基本使用</strong></em></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#为最新提交的代码创建标签[root@git project]# git tag -a &quot;v1.0.0&quot; -m &quot;latest&quot;[root@git project]# git tag             #查看当前分支的所有标签v1.0.0[root@git project]# git show --oneline v1.0.0     #查看这个标签是基于哪个commit快照tag v1.0.0latestc652338 NOW 7 read-in file1 ---&gt; ddddddiff --git a/file1.txt b/file1.txtindex d0bc53a..8dd8367 100644--- a/file1.txt+++ b/file1.txt@@ -1,3 +1,4 @@ aaaaa bbbbb ccccc+ddddd#以指定的commit id 而创建标签[root@lemon project01]# git log --onelinec652338 NOW 7 read-in file1 ---&gt; dddddf405afa NOW 6 read-in file1 ---&gt; cccccfdf30db NOW 5 read-in file1.txt --&gt; bbbbb3485684 NOW 4 read-in file1.txt --&gt; aaaaa2b1c545 NOW 3 rename file --&gt; file1.txt0c943fc NOW 2 rename file1 --&gt; file.txt75b88ee NOW 1 add --&gt; file1 file2 file3[root@git project]# git tag -a &#x27;v1.0.1&#x27; f405afa -m &quot;NOW 6&quot;[root@git project]# git tagv1.0.0v1.0.1[root@git project]# git show v1.0.1tag v1.0.1Tagger: lemon &lt;lemon_row@163.com&gt;Date:   Wed May 20 11:16:03 2020 +0800NOW 6commit f405afac0930c1feb0ee86cfa8b4c6032afd4b69Author: lemon &lt;lemon_row@163.com&gt;Date:   Wed May 20 10:03:44 2020 +0800    NOW 6 read-in file1 ---&gt; cccccdiff --git a/file1.txt b/file1.txtindex be4e668..d0bc53a 100644--- a/file1.txt+++ b/file1.txt@@ -1,2 +1,3 @@ aaaaa bbbbb+ccccc#不小心打错了标签，怎么删除这个标签？[root@git project]# git tag -d v1.0.1已删除标签 &#x27;v1.0.1&#x27;（曾为 608f0e6）[root@git project]# git tagv1.0.0</span></span><br></pre></td></tr></table></figure>



<h3 id="9-Git-分支"><a href="#9-Git-分支" class="headerlink" title="9. Git 分支"></a>9. Git 分支</h3><h5 id="1-概念"><a href="#1-概念" class="headerlink" title="1. 概念"></a>1. 概念</h5><ul>
<li><p>分支就是科幻电影里面的平行宇宙，当你正在电脑前努力学习Git的时候，另一个你正在另一个平行宇宙里努力学习SVN。</p>
</li>
<li><p>如果两个平行宇宙互不干扰，那对现在的你也没啥影响。不过，在某个时间点，两个平行宇宙合并了，结果，你既学会了Git又学会了SVN！</p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7vzs4h4dj30rk09pdi7.jpg" alt="image-20200519200256163"></p>
<h5 id="2-创建与合并分支原理"><a href="#2-创建与合并分支原理" class="headerlink" title="2. 创建与合并分支原理"></a>2. 创建与合并分支原理</h5><ul>
<li><p>在<a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013744142037508cf42e51debf49668810645e02887691000">版本回退</a>里，你已经知道，每次提交，Git都把它们串成一条时间线，这条时间线就是一个分支。截止到目前，只有一条时间线，在Git里，这个分支叫主分支，即 <code>master</code> 分支。<code>HEAD</code>严格来说不是指向提交，而是指向<code>master</code>，<code>master</code>才是指向提交的，所以，<code>HEAD</code>指向的就是当前分支。</p>
</li>
<li><p>一开始的时候，<code>master</code>分支是一条线，Git用<code>master</code>指向最新的提交，再用<code>HEAD</code>指向<code>master</code>，就能确定当前分支，<strong>以及当前分支的提交点：</strong></p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7vzy8xfqj30oc0710t1.jpg" alt="image-20200505152246823"></p>
<ul>
<li>每次提交，<code>master</code>分支都会向前移动一步，这样，随着你不断提交，<code>master</code>分支的线也越来越长，当我们创建新的分支，例如<code>dev</code>时，Git新建了一个指针叫<code>dev</code>，指向<code>master</code>相同的提交，再把<code>HEAD</code>指向<code>dev</code>，就表示当前分支在<code>dev</code>上：</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w055o5xj30oe0acgm1.jpg" alt="image-20200505152303875"></p>
<ul>
<li><p>你看，Git创建一个分支很快，因为除了增加一个<code>dev</code>指针，改改<code>HEAD</code>的指向，工作区的文件都没有任何变化！</p>
</li>
<li><p>不过，从现在开始，对工作区的修改和提交就是针对<code>dev</code>分支了，比如新提交一次后，<code>dev</code>指针往前移动一步，<strong>而<code>master</code>指针不变：</strong></p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w0avel7j30mu09zgm0.jpg" alt="image-20200505152324172"></p>
<ul>
<li>假如我们在<code>dev</code>上的工作完成了，就可以把<code>dev</code>合并到<code>master</code>上。Git怎么合并呢？最简单的方法，就是直接把<code>master</code>指向<code>dev</code>的当前提交，<strong>就完成了合并：</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w0gw4avj30mx0a50t9.jpg" alt="image-20200505152335926"></p>
<ul>
<li><p>所以Git合并分支也很快！就改改指针，工作区内容也不变！</p>
</li>
<li><p>合并完分支后，甚至可以删除<code>dev</code>分支。删除<code>dev</code>分支就是把<code>dev</code>指针给删掉，删掉后，<strong>我们就剩下了一条<code>master</code>分支：</strong></p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w0lw9gfj30lr07cdg7.jpg" alt="image-20200505152347227"></p>
<h5 id="3-常见的分支命令"><a href="#3-常见的分支命令" class="headerlink" title="3. 常见的分支命令"></a>3. 常见的分支命令</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//创建分支git branch &lt;name&gt;           <span class="comment">#基于当前commit创建test分支。.git/HEAD文件中记录了当前分支名字。//删除分支git branch -d test     #删除本地test分支git branch -D test     #test分支还没有合入当前分支，所以要用-D参数才能删掉。git push origin --delete test    #删除远程test分支//查看分支git branch                       #列出当前分支清单git branch -v                    #查看各个分支最后一个提交信息git branch -a                    #查看远程分支和本地分支git branch --merged              #查看哪些分支被合并git branch --no-merged           #查看哪些分支未被合并//融合及切换分支git merge                        #融合分支git checkout -b &lt;name&gt;           #创建+切换分支git checkout                     #切换分支//拉取分支git fetch origin                 #同步远程服务器的数据到本地git checkout -b test origin/test_remote     #将远程分支test_remote拉取下来到本地test分支git checkout test                #将远程分支test拉取下来到本地test分支git pull test                    #从远程分支test中checkout下来的本地分支test成为跟踪分支，使用git pull或者git push就会操作到对应的远程分支test</span></span><br></pre></td></tr></table></figure>



<h5 id="4-分支的使用演示"><a href="#4-分支的使用演示" class="headerlink" title="4. 分支的使用演示"></a>4. 分支的使用演示</h5><blockquote>
<p>创建分支,开发新功能是不能在master分支上开发</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git branch about            #创建about分支[root@git test]# git branch                  #查看分支</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w0s87nwj30mz022mx1.jpg" alt="image-20200505103600145"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git checkout about          #切换分支</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w0ynh18j30ml00zdfu.jpg" alt="image-20200505103633833"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git status</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w14aq1sj30mq01p3yq.jpg" alt="image-20200505103646638"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git log         #查看about分支的commit记录</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w19vv3hj30n10crgok.jpg" alt="image-20200505103800468"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># echo &quot;about us&quot; &gt;&gt; about.html         #在当前分支开发新功能</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w1hdbi2j30n601o0sl.jpg" alt="image-20200505115012259"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git add .[root@git test]# git commit -m &quot;about&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w1pyvbyj30mt02tmxr.jpg" alt="image-20200505103826565"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git log         #查看about分支的commit记录</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w1v394pj30n00fswhx.jpg" alt="image-20200505103848134"> </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git checkout master          #切换到master分支[root@git test]# git log                      #查看master分支的commit记录</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w26ibhnj60m10ccn0r02.jpg" alt="image-20200505115233966"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git merge about               #在master分支上合并about分支//注意：在公司中可不是这么搞的，因为你不能保证master分支的线路会一直保持在原地，所以一般开发都是先在自己的分支上重新将master分支合并（相当于同步master分支内容），然后在测试有没有问题，没有问题后才会到master分支上将其开发好的分支合并到master上面，然后在删除合并到master的分支</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w2cbcmij60n603zq2y02.jpg" alt="image-20200505115259095"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git log &amp;&amp; ls</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w2hz156j30mv0h6wie.jpg" alt="image-20200505104034395"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git branch test                  #创建test分支[root@git test]# git checkout test                #切换到test分支进行开发[root@git test]# echo &quot;test&quot; &gt; test.html[root@git test]# git add .[root@git test]# git commit -m &quot;test&quot;[root@git test]# git checkout master              #切换至master分支[root@git test]# git branch --merged              #查看已经合并的分支</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w2nnn8uj30mz01sglh.jpg" alt="image-20200505104242309"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git branch --no-merged            #查看未合并的分支</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w2vmtctj60mr00ywea02.jpg" alt="image-20200505104253480"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@git <span class="built_in">test</span>]<span class="comment"># git branch -D test                #删除test分支</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w315vmzj30ow00uq2s.jpg" alt="image-20200505120016106"></p>
<h5 id="5-分支冲突"><a href="#5-分支冲突" class="headerlink" title="5. 分支冲突"></a>5. 分支冲突</h5><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w379m75j30x50fk0zj.jpg" alt="image-20200520141058938"></p>
<h3 id="10-Git远程仓库-–-github"><a href="#10-Git远程仓库-–-github" class="headerlink" title="10. Git远程仓库 – github"></a>10. Git远程仓库 – github</h3><h5 id="1-github-是什么"><a href="#1-github-是什么" class="headerlink" title="1.  github 是什么"></a>1.  github 是什么</h5><ul>
<li><p><code>GitHub</code>是一个面向开源及私有软件项目的托管平台，因为只支持git 作为唯一的版本库格式进行托管，故名<code>GitHub</code>。</p>
</li>
<li><p><code>GitHub</code>于2008年4月10日正式上线，除了Git代码仓库托管及基本的 Web管理界面以外，还提供了订阅、讨论组、文本渲染、在线文件编辑器、协作图谱（报表）、代码片段分享（Gist）等功能。目前，其注册用户已经超过350万，托管版本数量也是非常之多，其中不乏知名开源项目 Ruby on Rails、python 等。</p>
</li>
<li><p>对于我们个人的话，GIT服务器并不需要我们搭建，使用<code>github</code>就可以满足我们的需求。官网：<a target="_blank" rel="noopener" href="https://github.com/">https://github.com/</a></p>
</li>
</ul>
<h5 id="2-登陆-github"><a href="#2-登陆-github" class="headerlink" title="2. 登陆 github"></a>2. 登陆 github</h5><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w3dvznzj30zw0jmjt7.jpg" alt="image-20200520142035128"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w3izpebj30r50g1aab.jpg" alt="image-20200520142121526"></p>
<h5 id="3-创建远程仓库"><a href="#3-创建远程仓库" class="headerlink" title="3. 创建远程仓库"></a>3. 创建远程仓库</h5><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w3pzu1nj30zw0pcac6.jpg" alt="image-20200520142525408"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w3ust5mj310f0pcgnh.jpg" alt="image-20200520142855981"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w3zdwccj30zx0pc40r.jpg" alt="image-20200520143318696"></p>
<ul>
<li><p><strong>说明：</strong></p>
<ul>
<li>code：代码</li>
<li>issues：问题</li>
<li>pull requests：拉取要求</li>
<li>Actions：动作</li>
<li>projects：专案</li>
<li>Wiki：维基</li>
<li>Security：安全</li>
<li>lnsights：见解</li>
<li>settings：设置</li>
</ul>
</li>
<li><p><strong>克隆仓库的两种协议：</strong></p>
<ul>
<li>https 协议：如果你这个仓库是私有的，克隆仓库时需要输入用户名 密码</li>
<li>ssh协议：需要在github上加入你机器上某个用户的ssh公钥才能使用</li>
</ul>
</li>
<li><p><strong>常用的git远程仓库命令</strong></p>
<ul>
<li>git  remote                                         #查看当前的远程库</li>
<li>git  remote  -v                                    #执行时加上 -v 参数，你还可以看到每个别名的实际链接地址。</li>
<li>git  remote  add  [别名]   url            #添加一个远程仓库</li>
<li>git  remote  rm    [别名]                   #删除远程仓库</li>
<li>git  push  -u  origin  master            #推送本地到远程分支</li>
<li>git  pull    -u  origin  master            #获取最新master代码到本地</li>
</ul>
</li>
</ul>
<h5 id="4-使用-github"><a href="#4-使用-github" class="headerlink" title="4. 使用 github"></a>4. 使用 <code>github</code></h5><ul>
<li><p><strong>这里 <code>https</code> 的我就不掩饰了，很简单，这里我使用ssh协议的，而且使用 <code>win10</code> 展示</strong></p>
</li>
<li><p><strong>为用户生成一个ssh的公钥 及 私钥 目录</strong></p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w46e5ksj30v60kagmz.jpg" alt="image-20200520151007813"></p>
<ul>
<li><strong>将其 公钥 拷贝到 <code>github</code> 上</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w4b3htuj30v60aegn3.jpg" alt="image-20200520151137388"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w4eu6hvj310c0m9abg.jpg" alt="image-20200520151343234"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w4ijac3j310f0mbac4.jpg" alt="image-20200520151445758"></p>
<p><img src="GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520151538386.png" alt="image-20200520151538386"></p>
<ul>
<li>克隆远程仓库</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:lemonOps/project01.git </span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w4nmahfj30oa03gglq.jpg" alt="image-20200520151729386"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w4ybekxj30v60a7zky.jpg" alt="image-20200520151836730"></p>
<ul>
<li><strong>将本地仓库推送至远程仓库</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin git@github.com:lemonOps/project01.git    <span class="comment">#添加好推送的仓库地址$ git  remote  -v              #查看当前的远程仓库</span></span><br></pre></td></tr></table></figure>

<p><img src="GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520152258943.png" alt="image-20200520152258943"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;# 第一次提交至远程仓库&quot;</span> &gt; README.md$ git add .$ git commit -m <span class="string">&quot;NOW 1 add --&gt; README.md&quot;</span>$ git push -u origin master</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w5bburej30v60j6taw.jpg" alt="image-20200520152956410"></p>
<ul>
<li>回到 <code>github</code>上查看</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w5ewlldj310f0jp405.jpg" alt="image-20200520153038803"></p>
<ul>
<li>给此次提交打上标签并再次推送至 <code>github</code></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --oneline$ git tag -a <span class="string">&quot;v1.0&quot;</span> 6de1296 -m <span class="string">&quot;标签 1&quot;</span>$ git tag$ git show v1.0 --oneline$ git push -u origin v1.0</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w5j109qj30v60iitaf.jpg" alt="image-20200520153558264"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w5nb5n2j30v606pmxo.jpg" alt="image-20200520153647332"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w5r00urj310f0drwfo.jpg" alt="image-20200520153712239"></p>
<h3 id="11-git-推送代码的整体过程"><a href="#11-git-推送代码的整体过程" class="headerlink" title="11. git 推送代码的整体过程"></a>11. git 推送代码的整体过程</h3><ul>
<li>创建自己的dev01分支</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git branch dev01</span><br></pre></td></tr></table></figure>

<ul>
<li>模拟master主分支更新</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ <span class="built_in">echo</span> <span class="string">&quot;# NOW 2 lemon very good&quot;</span> &gt; lemon.mdAdministrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git add .Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git commit -m <span class="string">&quot;NOW 2 add --&gt; lemon.md&quot;</span>[master 87c2a24] NOW 2 add --&gt; lemon.md 1 file changed, 1 insertion(+) create mode 100644 lemon.mdAdministrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git reflog --oneline87c2a24 (HEAD -&gt; master) HEAD@&#123;0&#125;: commit: NOW 2 add --&gt; lemon.md94a2b68 (tag: v1.0, origin/master, origin/HEAD, dev01) HEAD@&#123;1&#125;: <span class="built_in">clone</span>: from git@github.com:devopssss/project01.gitAdministrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git tag -a <span class="string">&quot;v2.0&quot;</span> 87c2a24 -m <span class="string">&quot;第二此提交&quot;</span>Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git tagv1.0v2.0Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git remote add origin git@github.com:devopssss/project01.gitAdministrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git remote -vorigin  git@github.com:devopssss/project01.git (fetch)origin  git@github.com:devopssss/project01.git (push)Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git push -u origin masterAdministrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git push -u origin v2.0</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w60ls62j30ri0c1wfb.jpg" alt="image-20200611120652266"></p>
<ul>
<li>进行dev01分支的开发；（现在这个分支和master上的分支内容是不一致的 !!!）</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git checkout dev01Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (dev01)$ lsREADME.mdAdministrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (dev01)$ <span class="built_in">echo</span> <span class="string">&quot;dev01&quot;</span> &gt; dev01.txtAdministrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (dev01)$ lsdev01.txt  README.mdAdministrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (dev01)$ git add .Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (dev01)$ git commit -m <span class="string">&quot;dev01&quot;</span>[dev01 01996d5] dev01 1 file changed, 1 insertion(+) create mode 100644 dev01.txt</span><br></pre></td></tr></table></figure>

<ul>
<li>使用git pull 在自己的分支上重新将master分支合并（相当于同步master分支内容），然后在测试有没有问题</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (dev01)$ git pull origin masterAdministrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (dev01)$ lsdev01.txt  lemon.md  README.md</span><br></pre></td></tr></table></figure>

<ul>
<li>测试没有问题后才会到master分支上将其开发好的分支合并到master上面，然后在删除合并到master的分支</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (dev01)$ git checkout masterAdministrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git merge dev01Updating 87c2a24..aaed965Fast-forward dev01.txt | 1 + 1 file changed, 1 insertion(+) create mode 100644 dev01.txt Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git branch -d dev01Deleted branch dev01 (was aaed965).</span><br></pre></td></tr></table></figure>

<ul>
<li>最后在推送至远程仓库</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git <span class="built_in">log</span> --onelineaaed965 (HEAD -&gt; master) Merge branch <span class="string">&#x27;master&#x27;</span> of github.com:devopssss/project01 into dev0101996d5 dev0187c2a24 (tag: v2.0, origin/master) NOW 2 add --&gt; lemon.md94a2b68 (tag: v1.0) NOW 1 add --&gt; README.mdAdministrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git tag -a <span class="string">&quot;v3.0&quot;</span> aaed965 -m <span class="string">&quot;标签 3&quot;</span>Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git push -u origin masterTotal 0 (delta 0), reused 0 (delta 0), pack-reused 0To github.com:devopssss/project01.git   87c2a24..aaed965  master -&gt; masterBranch <span class="string">&#x27;master&#x27;</span> <span class="built_in">set</span> up to track remote branch <span class="string">&#x27;master&#x27;</span> from <span class="string">&#x27;origin&#x27;</span>.Administrator@DESKTOP-HK1R5KR MINGW64 ~/Desktop/project01 (master)$ git push -u origin v3.0Enumerating objects: 8, done.Counting objects: 100% (8/8), done.Delta compression using up to 8 threadsCompressing objects: 100% (5/5), done.Writing objects: 100% (6/6), 678 bytes | 339.00 KiB/s, done.Total 6 (delta 1), reused 0 (delta 0), pack-reused 0remote: Resolving deltas: 100% (1/1), done.To github.com:devopssss/project01.git * [new tag]         v3.0 -&gt; v3.0</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w6724phj60sx0i2dh802.jpg" alt="image-20200611123335561"></p>
<h2 id="三、Gitlab-代码仓库"><a href="#三、Gitlab-代码仓库" class="headerlink" title="三、Gitlab 代码仓库"></a>三、Gitlab 代码仓库</h2><h3 id="1-简介概述"><a href="#1-简介概述" class="headerlink" title="1. 简介概述"></a>1. 简介概述</h3><blockquote>
<ul>
<li><p>与 GitHub 一样，GitLab 是一个基于Web的资源库管理器，可让团队协作处理代码，复制代码以安全地创建和编辑新项目，然后将完成的代码合并到现有项目中。</p>
</li>
<li><p>GitLab 是用Ruby编程语言编写的，包含Wiki 和问题跟踪功能。它有不同的版本：GitLab 社区版（CE），企业版（EE） 和 GitLab托管版本GitLab.com。</p>
</li>
<li><p>它拥有超过1400名贡献者，并被阿里巴巴，美国宇航局，欧洲核子研究中心等主要组织使用。</p>
</li>
</ul>
</blockquote>
<h3 id="2-什么是-Gitlab"><a href="#2-什么是-Gitlab" class="headerlink" title="2. 什么是 Gitlab"></a>2. 什么是 Gitlab</h3><ul>
<li><p> GitLab 是一个开源分布式版本控制系统</p>
</li>
<li><p> 开发语言: Ruby</p>
</li>
<li><p> 功能:管理项目源代码、版本控制、代码复用与查找</p>
</li>
</ul>
<h3 id="3-GitLab-与-GitHub-的不同"><a href="#3-GitLab-与-GitHub-的不同" class="headerlink" title="3. GitLab 与 GitHub 的不同"></a>3. GitLab 与 GitHub 的不同</h3><ul>
<li><strong><code>Github</code></strong> 分布式在线代码托管仓库,个人版本可直接在线免费使用,企业版本收费且需要服务器安装。</li>
<li><strong><code>Gitlab</code></strong> 分布式在线代码仓库托管软件,分社区免费版本与企业收费版本，都需要服务器安装。</li>
</ul>
<h3 id="4-Gitlab-的优势和应用场景"><a href="#4-Gitlab-的优势和应用场景" class="headerlink" title="4. Gitlab 的优势和应用场景"></a>4. Gitlab 的优势和应用场景</h3><ul>
<li><p>开源免费，适合中小型公司将代码放置在该系统中</p>
</li>
<li><p>品差异化的版本管理，离线同步以及强大分支管理功能</p>
</li>
<li><p>便捷的GUI操作界面以及强大账户权限管理功能</p>
</li>
<li><p>集成度很高，能够集成绝大多数的开发工具,支持内置HA,保证在高并发下仍旧实现高可用性</p>
</li>
</ul>
<h3 id="5-GitLab-主要服务构成"><a href="#5-GitLab-主要服务构成" class="headerlink" title="5. GitLab 主要服务构成"></a>5. GitLab 主要服务构成</h3><ul>
<li><p><code>Nginx</code> 静态Web服务器</p>
</li>
<li><p><code>Gitlab-workhorse</code> 轻量级的反向代理服务器</p>
</li>
<li><p><code>Gitlab-shell</code> 用于处理Git命令和修改authorized keys列表</p>
</li>
<li><p><code>Logrotate</code> 日志文件管理工具</p>
</li>
<li><p><code>Postgresql</code> 数据库</p>
</li>
<li><p><code>Redis</code> 缓存服务器</p>
</li>
</ul>
<h3 id="6-GitLab-的工作流程"><a href="#6-GitLab-的工作流程" class="headerlink" title="6. GitLab 的工作流程"></a>6. GitLab 的工作流程</h3><ul>
<li>创建并克隆项目</li>
<li>创建项目某Feature分支</li>
<li>编写代码并提交至该分支</li>
<li>推送改项目分支至远程Gitlab 服务器</li>
<li>进行代码检查并提交Master主分支合并申请</li>
<li>项目领导审查代码并确认合并申请</li>
</ul>
<h3 id="7-安装-Gitlab-仓库系统"><a href="#7-安装-Gitlab-仓库系统" class="headerlink" title="7. 安装 Gitlab 仓库系统"></a>7. 安装 Gitlab 仓库系统</h3><blockquote>
<p><strong>打开一台虚拟机：192.168.2.1</strong></p>
</blockquote>
<h4 id="添加hosts解析文件"><a href="#添加hosts解析文件" class="headerlink" title="添加hosts解析文件"></a>添加hosts解析文件</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># cat &lt;&lt;END&gt;&gt; /etc/hosts192.168.2.1 gitlab.lemon.com192.168.2.2 jenkins.lemon.com192.168.2.3 lb.lemon.comEND</span></span><br></pre></td></tr></table></figure>



<h4 id="安装-Gitlab-依赖"><a href="#安装-Gitlab-依赖" class="headerlink" title="安装 Gitlab 依赖"></a>安装 Gitlab 依赖</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># yum install -y policycoreutils openssh-server openssh-clients postfix lsof[root@gitlab ~]# systemctl start postfix;systemctl enable postfix     #开启邮箱服务</span></span><br></pre></td></tr></table></figure>



<h4 id="安装-Gitlab-12-0-3-版本"><a href="#安装-Gitlab-12-0-3-版本" class="headerlink" title="安装 Gitlab-12.0.3 版本"></a>安装 Gitlab-12.0.3 版本</h4><p>由于国内网络偏慢，这里使用清华大学的镜像源进行安装gitlab-ce</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># cat &lt;&lt;END&gt;&gt; /etc/yum.repos.d/gitlab-ce.repo[gitlab-ce]name=gitlab-cebaseurl=http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7repo_gpgcheck=0gpgcheck=0enabled=1\#gpgkey=END[root@gitlab ~]# yum clean all &amp;&amp; yum makecache[[root@gitlab ~]# yum -y install gitlab-ce-12.0.3-ce.0.el7</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w6ehya8j30p80gmmx7.jpg" alt="image-20200505122543609"></p>
<h4 id="Gitlab-管理命令"><a href="#Gitlab-管理命令" class="headerlink" title="Gitlab 管理命令"></a>Gitlab 管理命令</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># gitlab-ctl stop           #关闭gitlab[root@gitlab ~]# gitlab-ctl start          #启动gitlab[root@gitlab ~]# gitlab-ctl restart        #重启gitlab[root@gitlab ~]# gitlab-ctl status         #状态gitlab[root@gitlab ~]# gitlab-ctl reconfigure    #重载配置文件并启动glitlab</span></span><br></pre></td></tr></table></figure>



<h4 id="修改配置文件并启动-Gitlab"><a href="#修改配置文件并启动-Gitlab" class="headerlink" title="修改配置文件并启动 Gitlab"></a>修改配置文件并启动 Gitlab</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># vim /etc/gitlab/gitlab.rb#配置gitlab的URL或IP地址external_url &#x27;http://gitlab.lemon.com&#x27;#配置邮箱### Email Settingsgitlab_rails[&#x27;gitlab_email_enabled&#x27;] = truegitlab_rails[&#x27;gitlab_email_from&#x27;] = &#x27;lemon_row@163.com&#x27;       #邮箱账号gitlab_rails[&#x27;gitlab_email_display_name&#x27;] = &#x27;Gitlab-lemon&#x27;    #发送人显示名称### GitLab email server settingsgitlab_rails[&#x27;smtp_enable&#x27;] = truegitlab_rails[&#x27;smtp_address&#x27;] = &quot;smtp.163.com&quot;gitlab_rails[&#x27;smtp_port&#x27;] = 465gitlab_rails[&#x27;smtp_user_name&#x27;] = &quot;lemon_row@163.com&quot;gitlab_rails[&#x27;smtp_password&#x27;] = &quot;TZVLGNYMVOEWCIHR&quot;            #授权码gitlab_rails[&#x27;smtp_domain&#x27;] = &quot;163.com&quot;gitlab_rails[&#x27;smtp_authentication&#x27;] = &quot;login&quot;gitlab_rails[&#x27;smtp_enable_starttls_auto&#x27;] = truegitlab_rails[&#x27;smtp_tls&#x27;] = true:wq[root@gitlab ~]# gitlab-ctl reconfigure          #初始化gitlab，第一次会很慢</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w6mdkdvj30qk03c3yk.jpg" alt="image-20200505123253144"></p>
<p><strong>注意：重新配置应用程序。修改了 <code>gitlab</code> 服务配置文件后，都需要执行一下这个命令。让各个服务的配置文件，重新加载一下配置文件。这里等个4分钟左右。</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># gitlab-ctl status                   #查看gitlab状态</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w6rp65rj30p80c30u5.jpg" alt="image-20200505123636158"></p>
<p>**提示：<code>gitlab</code> 需要使用到80端口，所以得保证80端口不被占用，或者改端口 **</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># lsof -i:80</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w6wpgn7j30qu046wer.jpg" alt="image-20200520162148566"></p>
<h4 id="汉化-Gitlab"><a href="#汉化-Gitlab" class="headerlink" title="汉化 Gitlab"></a>汉化 Gitlab</h4><ul>
<li>汉化包下载地址 ==&gt; <a target="_blank" rel="noopener" href="https://gitlab.com/xhang/gitlab.git">https://gitlab.com/xhang/gitlab.git</a></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//查看gitlab的版本[root@gitlab ~]<span class="comment"># cat /opt/gitlab/embedded/service/gitlab-rails/VERSION11.2.3//下载对应版本的汉化包，解压汉化包，查看汉化包的版本[root@gitlab ~]# cd /usr/local/src/[root@gitlab src]# tar xf gitlab-v12.0.3-zh.tar.gz [root@gitlab src]# rm -rf gitlab-v12.0.3-zh.tar.gz [root@gitlab src]# cat gitlab-v12.0.3-zh/VERSION 12.0.3//先备份，避免汉化失败后gitlab瘫痪[root@gitlab src]# mkdir gitlab.bak[root@gitlab src]# cp -r /opt/gitlab/embedded/service/gitlab-rails/* /usr/local/src/gitlab.bak//将下载好的汉化包覆盖拷贝过去[root@gitlab src]# \cp -rf gitlab-v12.0.3-zh/* /opt/gitlab/embedded/service/gitlab-rails/cp: 无法以目录&quot;gitlab-v12.0.3-zh/log&quot; 来覆盖非目录&quot;/opt/gitlab/embedded/service/gitlab-rails/log&quot;cp: 无法以目录&quot;gitlab-v12.0.3-zh/tmp&quot; 来覆盖非目录&quot;/opt/gitlab/embedded/service/gitlab-rails/tmp&quot;//重新配置gitlab[root@gitlab src]# gitlab-ctl reconfigure//重启gitlab[root@gitlab src]# gitlab-ctl restart//检查是否启动成功[root@gitlab src]# gitlab-ctl status  [root@gitlab src]# lsof -i:80</span></span><br></pre></td></tr></table></figure>



<h4 id="访问浏览器测试"><a href="#访问浏览器测试" class="headerlink" title="访问浏览器测试"></a>访问浏览器测试</h4><blockquote>
<p><strong>注释：如果后期 web 界面访问时，总报 502的话，就把防火墙清空规则，另外内存要大于4G，不然以后内存不足，也报 502！</strong></p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7293p1j30fe09hq3u.jpg" alt="image-20200505123953743"></p>
<blockquote>
<p><strong><code>Gitlab</code> 默认用户是root，拥有最高权限，密码我设置的是“abc123..”，最少八位数。</strong></p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7acrn5j30pu0b9t9j.jpg" alt="image-20200505154721731"></p>
<blockquote>
<p>登陆 <code>Gitlab</code></p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7gg6q8j30pu0bgwf9.jpg" alt="image-20200519160034791"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7nh2ojj310z0hgabh.jpg" alt="image-20200519160253275"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7rpppzj311y0amwex.jpg" alt="image-20200520163224918"></p>
<p><strong><font color=#FF0000 >至此gitlab安装完成！</font></strong></p>
<h3 id="8-Gitlab-权限管理"><a href="#8-Gitlab-权限管理" class="headerlink" title="8. Gitlab 权限管理"></a>8. Gitlab 权限管理</h3><h4 id="创建Group，User，Project"><a href="#创建Group，User，Project" class="headerlink" title="创建Group，User，Project"></a>创建Group，User，Project</h4><ul>
<li><em>三者层级关系如下图：</em></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w7wp1u3j30my05atas.jpg" alt="image-20200505155246349"></p>
<h4 id="创建一个组，组名为java"><a href="#创建一个组，组名为java" class="headerlink" title="创建一个组，组名为java"></a>创建一个组，组名为java</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w823n3ej30vo0auq3p.jpg" alt="image-20200505155125938"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w86o34mj30zb0m5mye.jpg" alt="image-20200520163930342"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Gitlab中的组和项目有三种访问权限：Private、Internal、Public- Private：只有组成员才能看到- Internal：只要登录的用户就能看到,开源项目和组设置的是Internal- Public：所有人都能看到</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w8bsvatj315q0lltat.jpg" alt="image-20200520164034959"></p>
<h4 id="创建一个PM的用户作为项目管理者并加入到java组内"><a href="#创建一个PM的用户作为项目管理者并加入到java组内" class="headerlink" title="创建一个PM的用户作为项目管理者并加入到java组内"></a>创建一个PM的用户作为项目管理者并加入到java组内</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w8fy6rnj30tr07rjrr.jpg" alt="image-20200520164704264"></p>
<p><img src="GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520164838332.png" alt="image-20200520164838332"></p>
<ul>
<li><strong>注意：这里的邮箱在公司里一定要写上真实的，我这里为了方便，就随便写上了一个</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w8tqzznj30qr078aa1.jpg" alt="image-20200520165021663"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w91kjsej60un0akaaa02.jpg" alt="image-20200520165355480"></p>
<p><img src="GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520165404742.png" alt="image-20200520165404742"></p>
<p><strong>修改pm用户秘密: abc123..</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w99hpx5j30zn05jt8s.jpg" alt="image-20200520165453870"></p>
<p><img src="GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200505160239790.png" alt="image-20200505160239790"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w9f53ilj30yo01vt8i.jpg" alt="image-20200520165528634"></p>
<p><img src="GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520165542652.png" alt="image-20200520165542652"></p>
<h4 id="将pm管理用户加入到java组内"><a href="#将pm管理用户加入到java组内" class="headerlink" title="将pm管理用户加入到java组内"></a>将pm管理用户加入到java组内</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w9kqzn7j30r008zglt.jpg" alt="image-20200505160446031"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w9umg1fj30sh08p0t6.jpg" alt="image-20200520165717730"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7w9y7t5mj30yw0h13zq.jpg" alt="image-20200520165804474"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wa69ny7j30pe01bmwx.jpg" alt="image-20200520165901037"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wadp3h1j30vb05bjrr.jpg" alt="image-20200520165825710"></p>
<p><strong>Gitlab 权限管理：</strong></p>
<blockquote>
<p><strong>Gitlab 用户在组中有五种权限：Guest、Reporter、Developer、Master、Owner</strong></p>
</blockquote>
<ol>
<li><strong>Guest：</strong>可以创建issue、发表评论，不能读写版本库。</li>
<li><strong>Reporter：</strong>可以克隆代码，不能提交，QA、PM可以赋予这个权限。</li>
<li><strong>Developer：</strong>可以克隆代码、开发、提交、push，RD可以赋予这个权限。</li>
<li><strong>Maintainer：</strong>可以创建项目、添加tag、保护分支、添加项目成员、编辑项目，核心RD负责人可以赋予这个权限。</li>
<li><strong>Owner：</strong>可以设置项目访问权限 Visibility Level、删除项目、迁移项目、管理组成员，开发组leader能赋予这个权限。</li>
</ol>
<h4 id="用PM用户创建一个项目app1"><a href="#用PM用户创建一个项目app1" class="headerlink" title="用PM用户创建一个项目app1"></a>用PM用户创建一个项目app1</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7waspon7j30qo0a175f.jpg" alt="image-20200505161058389"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wawzffoj30zk0b2q39.jpg" alt="image-20200505161150381"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wb75mrqj30pw0cbt9f.jpg" alt="image-20200520170235802"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wbg3lepj30x20fb0to.jpg" alt="image-20200505161405176"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wbo1y5vj30ri06zdga.jpg" alt="image-20200520170340324"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wbv5vcsj30pw0kbwfg.jpg" alt="image-20200520170608480"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wc3kn9bj30zn0cg750.jpg" alt="image-20200520170723976"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wc96s6rj30qy0jet9d.jpg" alt="image-20200520170747102"></p>
<h4 id="在-gitlab-登陆页面下创建-dev1-dev2-用户，并作为开发者加入到-app1-项目中"><a href="#在-gitlab-登陆页面下创建-dev1-dev2-用户，并作为开发者加入到-app1-项目中" class="headerlink" title="在 gitlab 登陆页面下创建 dev1 dev2 用户，并作为开发者加入到 app1 项目中"></a>在 gitlab 登陆页面下创建 dev1 dev2 用户，并作为开发者加入到 app1 项目中</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wcnv69wj30a40eh74c.jpg" alt="image-20200520170907356"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wd6e4k7j30a90ejjrg.jpg" alt="image-20200520171038972"></p>
<p><a href=""><img src="GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520171340537.png" alt="image-20200520171340537"></a></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wdly1sij312c0g63zo.jpg" alt="image-20200520172319843"></p>
<ul>
<li><p><strong>创建完了之后这两个用户很明显是看不到 <code>app1</code> 这个项目的</strong></p>
</li>
<li><p><strong>所以需要登陆pm或root用户将其创建的用户添加到 <code>java</code> 组里面中或者 <code>app1</code> 项目中（授权）</strong></p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wdsdyikj30qo09zq3n.jpg" alt="image-20200505162104889"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7we1ebfaj315r0dw0tt.jpg" alt="image-20200520174937761"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7web7kmfj30zn062jrm.jpg" alt="image-20200520175206249"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7weejxbpj30z10hvta6.jpg" alt="image-20200520175251857"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wenapjcj30s201bq2p.jpg" alt="image-20200520175308120"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wesj1k6j30gv07x0tc.jpg" alt="image-20200520175140091"></p>
<ul>
<li><strong>组成员添加完了之后 看一下 <code>app1</code> 项目中有没有添加这两个用户</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7weyyzg5j30wi087dg6.jpg" alt="image-20200520175353110"></p>
<p><a href=""><img src="GitLab%20+%20Jenkins%20+%20Sonar%20Qube.assets/image-20200520175513606.png" alt="image-20200520175513606"></a></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wf470x6j30yv08u0tm.jpg" alt="image-20200520171736393"></p>
<ul>
<li><strong>随便登陆这两个其中一个账号验证是否能够看到app1项目</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wf75k9dj612u08ht9f02.jpg" alt="image-20200520172641592"></p>
<h3 id="9-gitlab-的基本使用"><a href="#9-gitlab-的基本使用" class="headerlink" title="9. gitlab 的基本使用"></a>9. gitlab 的基本使用</h3><h4 id="将-dev1-持有人的公钥放到-dev1-账号下"><a href="#将-dev1-持有人的公钥放到-dev1-账号下" class="headerlink" title="将 dev1 持有人的公钥放到 dev1 账号下"></a>将 dev1 持有人的公钥放到 dev1 账号下</h4><ul>
<li><strong>开启一台虚拟机，192.168.2.6</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加hosts解析文件[root@dev1 ~]# cat &lt;&lt;END&gt;&gt; /etc/hosts192.168.2.1 gitlab.lemon.com192.168.2.2 jenkins.lemon.com192.168.2.3 lb.lemon.comEND[root@dev1 ~]# ssh-keygen Generating public/private rsa key pair.Enter file in which to save the key (/root/.ssh/id_rsa): Created directory &#x27;/root/.ssh&#x27;.Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /root/.ssh/id_rsa.Your public key has been saved in /root/.ssh/id_rsa.pub.The key fingerprint is:SHA256:R5PUO4f4FLhExQ6YaD6B20GMn1Fdgzw98YXtEX/jfMo root@dev1The key&#x27;s randomart image is:+---[RSA 2048]----+|     =.o.*oO=. +o||    o B o.O.*o.oo||     * = .+* =.o+||    . *  .o.* + +||       .S .o o o.||         .  .. ..||              E  ||                 ||                 |+----[SHA256]-----+[root@dev1 ~]# cat .ssh/id_rsa.pub ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDDzzBDqVPZ9H0nVKucS3B3QNx318tAan06c17dZ0npQpsoAZaMUFxneMH+zoEjd+cG5Ee7f2D2n+iqV0wLGYDs9CY/8RqsSZ9SSx9K2aM9I1XFP6AUpuM5ddI/b3nhBVcbFjzpEckXPMz3O4C0twO1/aRD4byFtyivfdrry/KDNrYEMGojzv7PuktIvC/Qp0vKpvNG7msD6ePg4eHKCunHNGIboojL/vckpJZkvDt0MuDbeHdIE8Gj1XNkoudyWrCVwNTj8TEUkZE6pE7fYfBOzC1gOWv/+evROmwYLioprRJx+ZklRe4YmJzHw7Qiia4CluidQyUquMT5geGIme/3 root@dev1</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wfcylltj30pm07lq32.jpg" alt="image-20200520181739636"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wfiqzmdj315r0k5gnm.jpg" alt="image-20200520181938491"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wfqpmopj30ri08laa8.jpg" alt="image-20200520181949116"></p>
<h4 id="以ssh协议推送代码至远程仓库"><a href="#以ssh协议推送代码至远程仓库" class="headerlink" title="以ssh协议推送代码至远程仓库"></a>以ssh协议推送代码至远程仓库</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev1 ~]<span class="comment"># git config --global user.name &quot;dev1&quot;[root@dev1 ~]# git config --global user.email &quot;dev1@163.com&quot;[root@dev1 ~]# git clone git@gitlab.lemon.com:java/app1.git正克隆到 &#x27;app1&#x27;...warning: 您似乎克隆了一个空版本库。[root@dev1 ~]# cd app1[root@dev1 app1]# echo &#x27;# 第一次提交 测试&#x27; &gt;&gt; README.md[root@dev1 app1]# git add .[root@dev1 app1]# git commit -m &quot;NOW 1 add README.md&quot;[master（根提交） e4c5af0] NOW 1 add README.md 1 file changed, 1 insertion(+) create mode 100644 README.md[root@dev1 app1]# git tag -a &#x27;v1.0&#x27; -m &#x27;版本 1&#x27;[root@dev1 app1]# git show --oneline v1.0tag v1.0版本 1e4c5af0 NOW 1 add README.mddiff --git a/README.md b/README.mdnew file mode 100644index 0000000..e4460ab--- /dev/null+++ b/README.md@@ -0,0 +1 @@+# 第一次提交 测试[root@dev1 app1]# git push -u origin masterCounting objects: 3, done.Writing objects: 100% (3/3), 241 bytes | 0 bytes/s, done.Total 3 (delta 0), reused 0 (delta 0)To git@gitlab.lemon.com:java/app1.git * [new branch]      master -&gt; master分支 master 设置为跟踪来自 origin 的远程分支 master。[root@dev1 app1]# git push -u origin v1.0Counting objects: 1, done.Writing objects: 100% (1/1), 157 bytes | 0 bytes/s, done.Total 1 (delta 0), reused 0 (delta 0)To git@gitlab.lemon.com:java/app1.git * [new tag]         v1.0 -&gt; v1.0</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wfxlu80j30rf0htmy5.jpg" alt="image-20200520182932298"></p>
<h4 id="下面以PM用户进行创建开发计划分配给dev2"><a href="#下面以PM用户进行创建开发计划分配给dev2" class="headerlink" title="下面以PM用户进行创建开发计划分配给dev2"></a>下面以PM用户进行创建开发计划分配给dev2</h4><ul>
<li><strong>开启一台虚拟机，192.168.2.7</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加hosts解析文件[root@dev2 ~]# cat &lt;&lt;END&gt;&gt; /etc/hosts192.168.2.1 gitlab.lemon.com192.168.2.2 jenkins.lemon.com192.168.2.3 lb.lemon.comEND</span></span><br></pre></td></tr></table></figure>



<h5 id="开发一个-官网-V1-0-版本，包含首页和新闻"><a href="#开发一个-官网-V1-0-版本，包含首页和新闻" class="headerlink" title="开发一个 官网 V1.0 版本，包含首页和新闻"></a>开发一个 <code>官网 V1.0 版本</code>，包含首页和新闻</h5><p> <strong>（1）创建里程碑（Milestone）</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wg3d0u8j315r0kb40m.jpg" alt="image-20200520183610892"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wg66lj4j315r0kb40m.jpg" alt="image-20200520184021120"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wgcmda7j30z30940sv.jpg" alt="image-20200520184055990"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wgjq5psj30yb0dlgm0.jpg" alt="image-20200520184305649"></p>
<p><strong>（2）依次把任务首页，新闻添加到里程碑，并进行任务分配给dev2开发者</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wgpt30pj315r0jtdi9.jpg" alt="image-20200520184527869"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wgva9g6j30po05qgly.jpg" alt="image-20200520184604227"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wh0ikuij30z30ob3ze.jpg" alt="image-20200520184730629"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7whbzlt1j30qb0l4q44.jpg" alt="image-20200520184758795"></p>
<h5 id="使用dev2用户登录查看，会有任务提示"><a href="#使用dev2用户登录查看，会有任务提示" class="headerlink" title="使用dev2用户登录查看，会有任务提示"></a>使用dev2用户登录查看，会有任务提示</h5><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7whnmsbvj314t08xdgk.jpg" alt="image-20200520185000657"></p>
<h5 id="dev2-开发者收到任务，进行开发"><a href="#dev2-开发者收到任务，进行开发" class="headerlink" title="dev2 开发者收到任务，进行开发"></a>dev2 开发者收到任务，进行开发</h5><ul>
<li><strong>将 dev2 持有人的公钥放到 dev2 账号下</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev2 ~]<span class="comment"># ssh-keygen Generating public/private rsa key pair.Enter file in which to save the key (/root/.ssh/id_rsa): Created directory &#x27;/root/.ssh&#x27;.Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /root/.ssh/id_rsa.Your public key has been saved in /root/.ssh/id_rsa.pub.The key fingerprint is:SHA256:WC/AYWsXe0QwQDQtL7wlTJUzjGvAtyqAWd17tNwYZvk root@dev2The key&#x27;s randomart image is:+---[RSA 2048]----+|   o +B*==o      ||  . +o*+%=       ||.o   *=@+O.      ||+    .X=BoE      || .   o.*S .      ||  . . .  .       ||   .             ||                 ||                 |+----[SHA256]-----+[root@dev2 ~]# cat .ssh/id_rsa.pub ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDE1Wu54a56ryKqGRf5ctaJ71ZcApTV2KNxuG03ykSzZkcp7JSwUNxNRxrWu+XtbjKyCjkJnnBJ+Op18ixN17r69WY5edRxz3c50trNma2PDGm62fdzC0cdZLHnIKCRyizen5UrPxiPMkeJ6Gi2Z6ZmEZhxWhv6ePn3XE53lJg5PMyeSctMTZcikJ9qV0v3l3cZ8XD/fNaJnVQnYUswCxxg+JDEah5G8+sR5sKTJntTKxEjdJOd5/rsZFDGWzlMgieVzYYhPUWejLc2Fw+xQJRmGSQ5+TaKcNNwND/UYlJvzce+AkstgMiocXLN1pW9AFdX4dNo1+LjnjIHfbHobZlP root@dev2</span></span><br></pre></td></tr></table></figure>



<h5 id="将客户端公钥（id-rsa-pub）放进-dev2-账户中"><a href="#将客户端公钥（id-rsa-pub）放进-dev2-账户中" class="headerlink" title="将客户端公钥（id_rsa.pub）放进 dev2 账户中"></a>将客户端公钥（id_rsa.pub）放进 dev2 账户中</h5><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7whxy735j30rj090q37.jpg" alt="image-20200520191915565"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wi40347j314t0nw777.jpg" alt="image-20200520192004677"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wiad184j30x009xaae.jpg" alt="image-20200520192017477"></p>
<h5 id="进行开发"><a href="#进行开发" class="headerlink" title="进行开发"></a>进行开发</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev2 ~]<span class="comment"># git config --global user.name &quot;dev2&quot;[root@dev2 ~]# git config --global user.email &quot;dev2@163.com&quot;[root@dev2 ~]# git clone git@192.168.2.1:java/app1.git正克隆到 &#x27;app1&#x27;...remote: Enumerating objects: 4, done.remote: Counting objects: 100% (4/4), done.remote: Compressing objects: 100% (2/2), done.remote: Total 4 (delta 0), reused 0 (delta 0)接收对象中: 100% (4/4), done.[root@dev2 ~]# cd app1/ &amp;&amp; lsREADME.md[root@dev2 app1]# git checkout -b shouye切换到一个新分支 &#x27;shouye&#x27;[root@dev2 app1]# echo &quot;&lt;h1&gt; www.lemon.com&quot; &gt; index.html[root@dev2 app1]# git add .[root@dev2 app1]# git commit -m &quot;shouye&quot;    #创建并切换首页分支[shouye aa7b19c] shouye 1 file changed, 1 insertion(+) create mode 100644 index.html[root@dev2 app1]# git push origin shouyeCounting objects: 4, done.Compressing objects: 100% (2/2), done.Writing objects: 100% (3/3), 282 bytes | 0 bytes/s, done.Total 3 (delta 0), reused 0 (delta 0)remote: remote: To create a merge request for shouye, visit:remote:   http://gitlab.lemon.com/java/app1/merge_requests/new?merge_request%5Bsource_branch%5D=shouyeremote: To git@192.168.2.1:java/app1.git * [new branch]      shouye -&gt; shouye</span></span><br></pre></td></tr></table></figure>



<h5 id="回到-gitlab-上可以看到有刚才创建的分支，点击”Merge-request”合并分支请求，之后PM用户登录处理合并请求。此时，一个功能的开发流程就完成。"><a href="#回到-gitlab-上可以看到有刚才创建的分支，点击”Merge-request”合并分支请求，之后PM用户登录处理合并请求。此时，一个功能的开发流程就完成。" class="headerlink" title="回到 gitlab 上可以看到有刚才创建的分支，点击”Merge request”合并分支请求，之后PM用户登录处理合并请求。此时，一个功能的开发流程就完成。"></a>回到 gitlab 上可以看到有刚才创建的分支，点击”Merge request”合并分支请求，之后PM用户登录处理合并请求。此时，一个功能的开发流程就完成。</h5><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wifozu1j314t0b90to.jpg" alt="image-20200520192650404"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wik8trhj30y50h00tf.jpg" alt="image-20200520192908247"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wiq00akj30x70ej74t.jpg" alt="image-20200520193038752"></p>
<h5 id="登陆PM用户合并请求"><a href="#登陆PM用户合并请求" class="headerlink" title="登陆PM用户合并请求"></a>登陆PM用户合并请求</h5><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wivgf3bj30q309vjs3.jpg" alt="image-20200505175911359"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wj5gf13j314t08o750.jpg" alt="image-20200520193144859"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wjajvzkj30pd0ju0tz.jpg" alt="image-20200520193234910"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wjiczujj30oe04daa4.jpg" alt="image-20200520193453612"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wjowd86j30oe03xmx6.jpg" alt="image-20200520193510406"></p>
<h5 id="验证分支是否合并"><a href="#验证分支是否合并" class="headerlink" title="验证分支是否合并"></a>验证分支是否合并</h5><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wjw2d2pj30qm07caac.jpg" alt="image-20200505181325806"></p>
<h3 id="10-Gitlab-的备份和恢复"><a href="#10-Gitlab-的备份和恢复" class="headerlink" title="10. Gitlab 的备份和恢复"></a>10. Gitlab 的备份和恢复</h3><h5 id="创建备份目录，并授权"><a href="#创建备份目录，并授权" class="headerlink" title="创建备份目录，并授权"></a>创建备份目录，并授权</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># mkdir /data/backups/gitlab -p[root@gitlab ~]# chown -R git.git /data/</span></span><br></pre></td></tr></table></figure>



<h5 id="修改-gitlab-配置"><a href="#修改-gitlab-配置" class="headerlink" title="修改 gitlab 配置"></a>修改 gitlab 配置</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># vim /etc/gitlab/gitlab.rb 299 gitlab_rails[&#x27;backup_path&#x27;] = &quot;/data/backups/gitlab&quot;  #备份路径307 gitlab_rails[&#x27;backup_keep_time&#x27;] = 604800             #备份7天[root@gitlab ~]# gitlab-ctl reconfigure</span></span><br></pre></td></tr></table></figure>



<h5 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># gitlab-rake gitlab:backup:create</span></span><br></pre></td></tr></table></figure>



<h3 id="11-整体总结"><a href="#11-整体总结" class="headerlink" title="11. 整体总结"></a>11. 整体总结</h3><ul>
<li><p><em>PM在 <code>gitlab</code> 创建任务，分配给开发人员</em></p>
</li>
<li><p><em>开发人员领取任务后，在本地使用git clone拉取代码库</em></p>
</li>
<li><p><em>开发人员创建开发分支（git checkout -b dev），并进行开发</em></p>
</li>
<li><p><em>开发人员完成之后，提交到本地仓库（git commit ）</em></p>
</li>
<li><p><em>开发人员在gitlab界面上申请分支合并请求（Merge request）</em></p>
</li>
<li><p><em>PM在gitlab上查看提交和代码修改情况，确认无误后，确认将开发人员的分支合并到主分支（master）</em></p>
</li>
<li><p><em>开发人员在gitlab上Mark done确认开发完成，并关闭issue。这一步在提交合并请求时可以通过描述中填写”close #1”等字样，可以直接关闭issue。</em></p>
</li>
</ul>
<h2 id="四、部署-jenkins"><a href="#四、部署-jenkins" class="headerlink" title="四、部署 jenkins"></a>四、部署 jenkins</h2><ul>
<li><strong>开启一台虚拟机，192.168.2.2</strong></li>
</ul>
<h4 id="1-安装-JDK-和-Maven"><a href="#1-安装-JDK-和-Maven" class="headerlink" title="1. 安装 JDK 和 Maven"></a>1. 安装 <code>JDK</code> 和 <code>Maven</code></h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加hosts解析文件[root@jenkins ~]# cat &lt;&lt;END&gt;&gt; /etc/hosts192.168.2.1 gitlab.lemon.com192.168.2.2 jenkins.lemon.com192.168.2.3 lb.lemon.comEND[root@jenkins ~]# tar xf jdk-8u181-linux-x64.tar.gz [root@jenkins ~]# tar xf apache-maven-3.5.4-bin.tar.gz[root@jenkins ~]# mv jdk1.8.0_181 /usr/local/java[root@jenkins ~]# mv apache-maven-3.5.4 /usr/local/maven[root@jenkins ~]# vi /etc/profileexport JAVA_HOME=/usr/local/javaexport CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/libexport PATH=$JAVA_HOME/bin:$PATHexport MAVEN_HOME=/usr/local/mavenexport PATH=$PATH:$MAVEN_HOME/bin[root@jenkins ~]# source /etc/profile[root@jenkins ~]# java -versionjava version &quot;1.8.0_181&quot;Java(TM) SE Runtime Environment (build 1.8.0_181-b13)Java HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode) [root@jenkins ~]# mvn -vApache Maven 3.5.4 (1edded0938998edf8bf061f1ceb3cfdeccf443fe; 2018-06-18T02:33:14+08:00)Maven home: /usr/local/mavenJava version: 1.8.0_181, vendor: Oracle Corporation, runtime: /usr/local/java/jreDefault locale: zh_CN, platform encoding: UTF-8OS name: &quot;linux&quot;, version: &quot;3.10.0-693.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;#将maven的下载源换成国内的[root@jenkins ~]# vim /usr/local/maven/conf/settings.xml +159#在159行的上面添加以下内容    &lt;mirror&gt;      &lt;id&gt;aliyunmaven&lt;/id&gt;      &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;      &lt;name&gt;aliyun maven&lt;/name&gt;      &lt;url&gt;https://maven.aliyun.com/repository/public &lt;/url&gt;    &lt;/mirror&gt;:wq!</span></span><br></pre></td></tr></table></figure>



<h4 id="2-下载-jenkins-rpm-包并安装"><a href="#2-下载-jenkins-rpm-包并安装" class="headerlink" title="2. 下载 jenkins-rpm 包并安装"></a>2. 下载 jenkins-rpm 包并安装</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//安装jenkins[root@jenkins ~]<span class="comment"># yum -y install jenkins-2.233-1.1.noarch.rpm//修改jenkins配置文件[root@jenkins ~]# vim /etc/sysconfig/jenkins19 JENKINS_JAVA_CMD=&quot;/usr/local/java/bin/java&quot;29 JENKINS_USER=&quot;root&quot;                          #这里为了方便，使用root用户运行jenkins65 JENKINS_LISTEN_ADDRESS=&quot;192.168.2.2&quot;//启动jenkins[root@jenkins ~]# systemctl start jenkins[root@jenkins ~]# netstat -anptu|grep &quot;8080&quot;tcp6   0   0   192.168.2.2:8080   :::*   LISTEN   67706/java</span></span><br></pre></td></tr></table></figure>



<h4 id="3-jenkins-的目录介绍"><a href="#3-jenkins-的目录介绍" class="headerlink" title="3. jenkins 的目录介绍"></a>3. jenkins 的目录介绍</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@gitlab ~]<span class="comment"># rpm -ql jenkins/etc/init.d/jenkins             #jenkins的启动文件/etc/logrotate.d/jenkins        #记载Jenkins日至位置的文件/etc/sysconfig/jenkins          #jenkins的配置文件/usr/lib/jenkins                #jenkins的war包，升级就是在这做的 /usr/lib/jenkins/jenkins.war    #jenkins的程序war包/usr/sbin/rcjenkins             #jenkins的为二进制文件/var/cache/jenkins              #jenkins的程序文件，运行程序解压出来的/var/lib/jenkins                #jenkins的主目录/var/log/jenkins                #jenkins的日志文件/var/lib/jenkins/workspace      #拉取代码的存放路径/var/lib/jenkins/plugins/       #这个目录下是我们安装所有的插件/var/lib/jenkins/secrets/initialAdminPassword       #管理员密码文件</span></span><br></pre></td></tr></table></figure>



<h4 id="4-跳过-jenkins-插件安装"><a href="#4-跳过-jenkins-插件安装" class="headerlink" title="4. 跳过 jenkins 插件安装"></a>4. 跳过 jenkins 插件安装</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@jenkins ~]<span class="comment"># cat /var/lib/jenkins/secrets/initialAdminPassword3b99cdf79df747e494484426efb8bd1c         #管理员密码</span></span><br></pre></td></tr></table></figure>

<ul>
<li>访问：<a target="_blank" rel="noopener" href="http://jenkins.lemon.com:8080/">http://jenkins.lemon.com:8080/</a></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wk8dfj0j30ri0npgmm.jpg" alt="image-20200505192734398"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wkfp027j30ri0odmz6.jpg" alt="image-20200520231715521"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wko5yn1j30ri0ob74q.jpg" alt="image-20200520231751361"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wkwzcf7j30ri0oct9g.jpg" alt="image-20200520231819993"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wl6eaocj30ri09wgm0.jpg" alt="image-20200520231859006"></p>
<ul>
<li><strong>修改admin用户密码</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wlbzuvjj60vp06idgl02.jpg" alt="image-20200520212137256"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wlmvxgvj30um0na3z2.jpg" alt="image-20200520212217903"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wlvpc4mj30po0e4mxj.jpg" alt="image-20200520231957176"></p>
<h4 id="5-更换jenkins插件下载源"><a href="#5-更换jenkins插件下载源" class="headerlink" title="5. 更换jenkins插件下载源"></a>5. 更换jenkins插件下载源</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wm3okwvj30v80ds0uf.jpg" alt="image-20200520212258589"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wm7acnzj30vp0aamxp.jpg" alt="image-20200520212328361"></p>
<ul>
<li><strong>清华源：</strong><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</a></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wmddkzzj30ny063dfu.jpg" alt="image-20200520212447372"></p>
<ul>
<li><p><strong>完事之后将网页关掉并down掉 <code>jenkins</code>，替换完官方的 <code>json</code> 文件之后在启动。</strong></p>
</li>
<li><p><strong>注：系统重启后，<code>default.json</code> 文件会还原，所以只要系统重启就执行下面这个命令</strong>。</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@jenkins ~]<span class="comment"># systemctl stop jenkins[root@jenkins ~]# cd /var/lib/jenkins/updates/[root@jenkins updates]# sed -i &#x27;s/http:\/\/updates.jenkins-ci.org\/download/https:\/\/mirrors.tuna.tsinghua.edu.cn\/jenkins/g&#x27; default.json &amp;&amp; sed -i &#x27;s/http:\/\/www.google.com/https:\/\/www.baidu.com/g&#x27; default.json[root@jenkins updates]# systemctl start jenkins[root@jenkins updates]# netstat -anptu|grep &quot;java&quot;tcp6       0      0 192.168.2.2:8080      :::*       LISTEN      11591/java</span></span><br></pre></td></tr></table></figure>



<h4 id="6-离线安装-jenkins-插件"><a href="#6-离线安装-jenkins-插件" class="headerlink" title="6.离线安装 jenkins 插件"></a>6.离线安装 jenkins 插件</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@jenkins ~]<span class="comment"># systemctl stop jenkins[root@jenkins ~]# rm -rf /var/lib/jenkins/plugins/[root@jenkins ~]# tar xf jenkins-2.233_plugins.tar.gz -C /var/lib/jenkins/[root@jenkins ~]# chown -R jenkins:jenkins /var/lib/jenkins/plugins/[root@jenkins ~]# systemctl start jenkins</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>jenkins 插件安装完成</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wmmz3ckj30u90egq3d.jpg" alt="image-20200520213421856"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wmrlwv7j31160gn0u2.jpg" alt="image-20200520213450701"></p>
<h2 id="五、Jenkins-集成-Gitlab（持续集成）"><a href="#五、Jenkins-集成-Gitlab（持续集成）" class="headerlink" title="五、Jenkins 集成 Gitlab（持续集成）"></a>五、Jenkins 集成 Gitlab（持续集成）</h2><p><strong>整体思路：</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wn5rpgzj31d00oenh3.jpg" alt="image-20210402172434327"></p>
<h4 id="1-在-gitlab-上创建项目并将代码推送上去"><a href="#1-在-gitlab-上创建项目并将代码推送上去" class="headerlink" title="1. 在 gitlab 上创建项目并将代码推送上去"></a>1. 在 gitlab 上创建项目并将代码推送上去</h4><ul>
<li><strong>使用pm用户基于 <code>java</code> 组创建 <code>monitor</code>项目</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wngfg65j30u80m3tbx.jpg" alt="image-20200520235036801"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wnmejhwj30tz04rdfv.jpg" alt="image-20200520235313198"></p>
<ul>
<li><strong>使用 <code>dev1</code> 或者 <code>dev2</code> 开发用户将monitor代码推送至此项目中</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev1 ~]<span class="comment"># unzip monitor_html.zip                #解压我本地的项目代码[root@dev1 ~]# ll总用量 13688drwxr-xr-x 9 root root     4096 5月  20 08:57 monitor-rw-r--r-- 1 root root 14008331 5月  20 08:59 monitor_html.zip[root@dev1 ~]# cd monitor                            #进入解压后的代码目录中[root@dev1 monitor]# git init                        #初始化monitor目录重新初始化现存的 Git 版本库于 /root/monitor/.git/[root@dev1 monitor]# git add .                       #加入到暂存区[root@dev1 monitor]# git status                      #查看暂存区状态[root@dev1 monitor]# git commit -m &quot;NOW 1&quot;           #提交至本地仓库[master 9c1c324] NOW 1 110 files changed, 65709 insertions(+), 65709 deletions(-) [root@dev1 monitor]# git remote add origin git@gitlab.lemon.com:java/monitor.git   #添加远程仓库[root@dev1 monitor]# git remote -v                      #查看远程仓库（ssh协议的）origin	git@gitlab.lemon.com:java/monitor.git (fetch)origin	git@gitlab.lemon.com:java/monitor.git (push)[root@dev1 monitor]# git push -u origin master          #推送代码至远程仓库Counting objects: 564, done.Compressing objects: 100% (497/497), done.Writing objects: 100% (564/564), 9.03 MiB | 0 bytes/s, done.Total 564 (delta 159), reused 363 (delta 54)remote: Resolving deltas: 100% (159/159), done.To git@gitlab.lemon.com:java/monitor.git * [new branch]      master -&gt; master分支 master 设置为跟踪来自 origin 的远程分支 master。</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>查看是否推送至monitor项目中</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wns3q76j30z50nqdhc.jpg" alt="image-20200521002049018"></p>
<h4 id="2-下载集成-gitlab-的插件"><a href="#2-下载集成-gitlab-的插件" class="headerlink" title="2. 下载集成 gitlab 的插件"></a>2. 下载集成 <code>gitlab</code> 的插件</h4><ul>
<li>这些插件我都已经在上面安装好了，所以这一步可以跳过</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wnwrj0sj30y40e9gsq.jpg" alt="image-20200521002447884"></p>
<h4 id="3-在-jenkins-里配置实现持续集成"><a href="#3-在-jenkins-里配置实现持续集成" class="headerlink" title="3. 在 jenkins 里配置实现持续集成"></a>3. 在 jenkins 里配置实现持续集成</h4><blockquote>
<p><strong>进入主页–创建一个新任务</strong></p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wnzklkbj30vy0i40u3.jpg" alt="image-20200521003043921"></p>
<blockquote>
<p><strong>输入项目名称 freestyle-monitor—构建一个自由风格的软件项目—确认</strong></p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wo6z7ubj30sm0m5mzn.jpg" alt="image-20200521002958391"></p>
<blockquote>
<p><strong>General–填写项目描述–Discard old builds</strong></p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7woct8rnj60sl0gfgm902.jpg" alt="image-20200521003526153"></p>
<blockquote>
<p><strong>源码管理–Git–添加 <code>gitlab</code> 项目的URL–授权认证</strong></p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wogdbu1j30te0783yz.jpg" alt="image-20200521003803292"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7woj4c18j30sn0mp0u6.jpg" alt="image-20200521004019949"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//在jenkins服务器上生成私钥，马上就用[root@jenkins ~]<span class="comment"># ssh-keygenGenerating public/private rsa key pair.Enter file in which to save the key (/root/.ssh/id_rsa): Enter passphrase (empty for no passphrase): Enter same passphrase again: Your identification has been saved in /root/.ssh/id_rsa.Your public key has been saved in /root/.ssh/id_rsa.pub.The key fingerprint is:SHA256:cYOfmb21FU4/mqzakUqAqwFPW1G7Mz2hmLti6eDfia8 root@jenkinsThe key&#x27;s randomart image is:+---[RSA 2048]----+|       .         ||      . ..       ||     . .o.o    o ||      = ++.*  o o|| . . = *So= . .oo||  + o o + . oooo.|| . +.o   . o.+.  ||. .+= o . o o    || .+E+=   o.o     |+----[SHA256]-----+[root@jenkins ~]# cat .ssh/id_rsa.pub      #公钥ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDj13aUUWlOxpLv/tGDHF7v1dBUrs0wVirnxKXbFwetXUECnqGyd9UOHSrkkEiKW512ommbXDziX+TEa6S5QULZCrS0dM3tN4WCLyouhPbPzjiOA+HHJj0XpgXxnSz6MobeAVPByS0l9LhJkISIxl+gmz+e/VvMcSOmwOXHm70kIngA59X6xy5t2xeb0vwkQXGmoA5bQdQx32mugDT4HA1IBpoRRV3h6cfjhSW85wjdgWRGWFIRFLfLKCyBPBaGxGY7XJB9Fpu3SaMfBb85EYBk///L1Ha8dEKLkmiECrDo6SgQHWoF7GVcyzATku80NHR6boZFC4belELS2rPmTfe9 root@jenkins[root@jenkins ~]# cat .ssh/id_rsa          #私钥-----BEGIN RSA PRIVATE KEY-----MIIEowIBAAKCAQEA49d2lFFpTsaS7/7Rgxxe79XQVK7NMFYq58Sl2xcHrV1BAp6hsnfVDh0q5JBIiluddqJpm1w84l/kxGukuUFC2Qq0tHTN7TeFgi8qLoT2z844jgPhxyY9F6YF8Z0s+jKG3gFTwcktJfS4SZCEiMZfoJs/nv1bzHEjpsDlx5u9JCJ4AOfV+scubdsXm9L8JEFxpqAOW0HUMd9proA0+BwNSAaaEUVd4enH44UlvOcI3YFkRlhSERS3yygsgTwWhsRmO1yQfRabt0mjHwW/ORGAZP//y9R2vHRCi5JohAqw6OkoEB1qBexlXMswE5LvNDR0em6GRQuG3pRC0tqz5k33vQIDAQABAoIBAQDcu22CG60uSGsqX3CS2PWQ3VBL+l2HqrM+fuE/9HvXlTTaWNzGjhm25sMbVD0y7bcLrCUsApxppAV51d9sKrGcnCadfVvTqaqKiS8QiniismNQEqq1yXH+azXu8hsU+cZ3ZknCwCghUYkInB4KdEVIz58/ZK1+z01+y/rQ+yyux3GQQq7ZM+gQDhAmrgma+r/lov0itCM86Eo5PN9ZQ5I7m23ACQsZNjZOQ9yxIqjsYYAo+iJuT96ZUlOkPnzTwQ2mtI1SaMgPUZJbgjb4A3FaU0rVru+bsQX93mZEEWAQqBzr1JkE8gd4P5VCMmjxlNxQwzThKMaGsvU9ijqXDZaBAoGBAPzZ7y/UDLd5cMgljPtGG3buk9vWKmL32DTRShj2OdrXJO49QGy3uMUi9qQ3j8ShmvclKdQ3LXofEFruwBmkP0F/oEYJ5/MEXkgi1+dE8RgjIg6v7+WwsAhFJrhnK+rGbVSABJ5O9bb9qmEKgZq+2W1/4Y6RF/+DSSN/jxXllP3JAoGBAOatzO34RMHemgQoRQCW6NOTHnWOpn1ubhMR21rNHfgwmsyaPMv/LDkBQObyKMLb4VgCD7jD2NW9DlTcKiZjqmjgDALxR1tt3mXZ2znTWEDI774Tc2QebJCpRIdQqKG1nm5Hd131E5CS72cNCVmacVc9xi7kO107e6bc+34g8hRVAoGAe8/PcpEYBQN/OVJB3YyvyCX82unc6YdJJFvTN7PiEonE+K+fi1zPKiD7ut/GE1e6xQg6mkLGjwUFAjHkeOnXW6A9/+272WCrNhFxvToiAFq7w4tdIhDJsdMCqctDUvwE7xqcqFQrt4Yw1sHJQtfvKdIzxZbAtIo51xsQGn3H3hkCgYAZhpnqq1JQcaVxWFNqYUiaQOlZ8NMThijAC3XOcmwijp5Sja60lCP8mtrns1w3U8V3y6KZu3I/FJCFa2duoBC3UjOCD9jpkRrPAnBz0aMuaA2/Zr+aEJPK3jArGQ3P9xz07wuSZhAoK1o6eQLT23c3RCqt/atkAbUJHeLmbhbbkQKBgFytaJklEVRibl0iiDYZfkzIhD/v1I43JyUmuv+VuTwGDYFx4b0jBOAmEeKnpRzyvmSbG52XHcJeaGt0iLaZVnpby/y04aowJC+2sQ7fGKE61PYy9WDasHBruRuMiY5YzMC9LsGeSs4gF/oVt6d80M2itaqf+MSRZpT3VVpqGXw9-----END RSA PRIVATE KEY-----</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>把 <code>jenkins</code> 服务器上的公钥放到 <code>gitlab</code> 的  pm 账户上用来拉取代码</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7worz5akj313c0lu0v5.jpg" alt="image-20200521004915704"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wovrd6kj30tj09674j.jpg" alt="image-20200521004934281"></p>
<ul>
<li><strong>验证 <code>jenkins</code> 服务器能否克隆这个项目</strong></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@jenkins ~]<span class="comment"># git clone git@gitlab.lemon.com:java/monitor.git正克隆到 &#x27;monitor&#x27;...remote: Enumerating objects: 564, done.remote: Counting objects: 100% (564/564), done.remote: Compressing objects: 100% (392/392), done.remote: Total 564 (delta 159), reused 564 (delta 159)接收对象中: 100% (564/564), 9.03 MiB | 0 bytes/s, done.处理 delta 中: 100% (159/159), done.[root@jenkins ~]# rm -rf monitor///很明显，jenkins服务器已经能够克隆gitlab上的项目了</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>再回到 jenkins 的web页面上将他自己的私钥放到 jenkins 凭据上</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wp2wr9kj313n0k5gnb.jpg" alt="image-20200521010030412"></p>
<blockquote>
<p>Credentials—选择 root</p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wp74zkbj30sm0i6myb.jpg" alt="image-20200521010337874"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wpbaje8j60s002djre02.jpg" alt="image-20200521010815380"></p>
<h4 id="4-点击立即构建"><a href="#4-点击立即构建" class="headerlink" title="4. 点击立即构建"></a>4. 点击立即构建</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wphbqm9j313t0howg9.jpg" alt="image-20200521011053244"></p>
<h4 id="5-构建成功后点击-控制台输出-和-工作区"><a href="#5-构建成功后点击-控制台输出-和-工作区" class="headerlink" title="5. 构建成功后点击 控制台输出 和 工作区"></a>5. 构建成功后点击 控制台输出 和 工作区</h4><ul>
<li><strong>点击控制台输出</strong></li>
</ul>
<blockquote>
<p><strong>控制台输出，SUCCESS则构建成功</strong></p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wpoehy1j30tz0g3wfw.jpg" alt="image-20200521011929942"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wq1mqruj60qu0ijgn302.jpg" alt="image-20200521012036181"></p>
<ul>
<li><strong>点击工作去</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wq91qa6j313t0ir40s.jpg" alt="image-20200521011356399"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wqe1wgjj30sf0mltbl.jpg" alt="image-20200521011658186"></p>
<ul>
<li><strong>查看 <code>jenkins</code> 服务器上的 <code>/var/lib/jenkins/workspace/</code> 目录是否下载了代码</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wqiuz6dj30y80d6t9w.jpg" alt="image-20200521011751571"></p>
<blockquote>
<p><strong>可以看到，在工作目录下边有部署的代码；上面只是完成了第一步，也就是持续集成，下面我们先开始搭建集群，在修改此任务的配置（持续集成 + 持续部署）。</strong></p>
</blockquote>
<h2 id="六、搭建web集群"><a href="#六、搭建web集群" class="headerlink" title="六、搭建web集群"></a>六、搭建web集群</h2><blockquote>
<p><strong>打开三台虚拟机</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>IP</th>
<th>host_name</th>
<th>role</th>
</tr>
</thead>
<tbody><tr>
<td>192.168.2.3</td>
<td>LB</td>
<td>nginx充当负载均衡</td>
</tr>
<tr>
<td>192.168.2.4</td>
<td>web01</td>
<td>nginx充当web服务</td>
</tr>
<tr>
<td>192.168.2.5</td>
<td>Web02</td>
<td>nginx充当web服务</td>
</tr>
</tbody></table>
<h4 id="1-在这三台节点上都安装nginx（操作相同）"><a href="#1-在这三台节点上都安装nginx（操作相同）" class="headerlink" title="1. 在这三台节点上都安装nginx（操作相同）"></a>1. 在这三台节点上都安装nginx（操作相同）</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加hosts解析文件cat &lt;&lt;END&gt;&gt; /etc/hosts192.168.2.1 gitlab.lemon.com192.168.2.2 jenkins.lemon.com192.168.2.3 lb.lemon.comENDwget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repovim /etc/yum.repos.d/nginx.repo [nginx-stable]name=nginx stable repobaseurl=http://nginx.org/packages/centos/$releasever/$basearch/gpgcheck=1enabled=1gpgkey=https://nginx.org/keys/nginx_signing.keymodule_hotfixes=true[nginx-mainline]name=nginx mainline repobaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/gpgcheck=1enabled=0gpgkey=https://nginx.org/keys/nginx_signing.keymodule_hotfixes=trueyum clean allyum makecacheyum -y install nginx#修改这三台的主配置文件（配置相同）vim /etc/nginx/nginx.confuser  nginx;worker_processes  1;error_log  /var/log/nginx/error.log warn;pid        /var/run/nginx.pid;events &#123;    worker_connections  1024;&#125;http &#123;    include       /etc/nginx/mime.types;    default_type  application/octet-stream;    sendfile      on;    keepalive_timeout  0;    include /etc/nginx/conf.d/*.conf;&#125;</span></span><br></pre></td></tr></table></figure>



<h4 id="2-配置-lb-主机"><a href="#2-配置-lb-主机" class="headerlink" title="2. 配置 lb 主机"></a>2. 配置 lb 主机</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@lb ~]<span class="comment"># cd /etc/nginx/conf.d/[root@lb conf.d]# gzip default.conf              #将默认的虚拟主机文件注释掉[root@lb conf.d]# vim proxy_lb.lemon.com.confupstream lb &#123;        server 192.168.2.4:80;        server 192.168.2.5:80;&#125;server &#123;        listen 80;        server_name lb.lemon.com;        root /code;        location / &#123;                proxy_pass http://lb;                proxy_set_header Host $http_host;                proxy_set_header X-Forward-For $remote_addr;        &#125;&#125;:wq![root@lb conf.d]# nginx -tnginx: the configuration file /etc/nginx/nginx.conf syntax is oknginx: configuration file /etc/nginx/nginx.conf test is successful[root@lb conf.d]# systemctl start nginx;systemctl enable nginx[root@lb conf.d]# netstat -anptu|grep 80tcp        0      0 0.0.0.0:80     0.0.0.0:*     LISTEN      16216/nginx: master</span></span><br></pre></td></tr></table></figure>



<h4 id="3-配置-web01-主机"><a href="#3-配置-web01-主机" class="headerlink" title="3. 配置 web01 主机"></a>3. 配置 web01 主机</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]<span class="comment"># cd /etc/nginx/conf.d/[root@web01 conf.d]# gzip default.conf[root@web01 conf.d]# vim nginx_01.confserver &#123;        listen 80;        server_name localhost;        root /code/web;        location / &#123;                index index.html;        &#125;&#125;:wq![root@web01 conf.d]# mkdir -p /code/web[root@web01 conf.d]# nginx -tnginx: the configuration file /etc/nginx/nginx.conf syntax is oknginx: configuration file /etc/nginx/nginx.conf test is successful[root@web01 conf.d]# systemctl start nginx;systemctl enable nginx[root@web01 conf.d]# netstat -anptu|grep 80tcp        0      0 0.0.0.0:80        0.0.0.0:*     LISTEN      16171/nginx: master</span></span><br></pre></td></tr></table></figure>



<h4 id="4-配置-web02-主机"><a href="#4-配置-web02-主机" class="headerlink" title="4. 配置 web02 主机"></a>4. 配置 web02 主机</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web02 ~]<span class="comment"># cd /etc/nginx/conf.d/[root@web02 conf.d]# gzip default.conf[root@web02 conf.d]# vim nginx_02.confserver &#123;        listen 80;        server_name localhost;        root /code/web;        location / &#123;                index index.html;        &#125;&#125;:wq![root@web02 conf.d]# mkdir -p /code/web[root@web02 conf.d]# nginx -tnginx: the configuration file /etc/nginx/nginx.conf syntax is oknginx: configuration file /etc/nginx/nginx.conf test is successful[root@web02 conf.d]# systemctl start nginx;systemctl enable nginx[root@web02 conf.d]# netstat -anptu|grep 80tcp        0      0 0.0.0.0:80        0.0.0.0:*     LISTEN      16171/nginx: master</span></span><br></pre></td></tr></table></figure>



<h4 id="5-将-jenkins-服务器上的代码拷贝到两台web节点上"><a href="#5-将-jenkins-服务器上的代码拷贝到两台web节点上" class="headerlink" title="5. 将 jenkins 服务器上的代码拷贝到两台web节点上"></a>5. 将 jenkins 服务器上的代码拷贝到两台web节点上</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@jenkins ~]<span class="comment"># cd /var/lib/jenkins/workspace/freestyle-monitor[root@jenkins freestyle-monitor]# scp -r ./* root@192.168.2.4:/code/web[root@jenkins freestyle-monitor]# scp -r ./* root@192.168.2.5:/code/web</span></span><br></pre></td></tr></table></figure>



<h4 id="6-查看并访问-http-lb-lemon-com"><a href="#6-查看并访问-http-lb-lemon-com" class="headerlink" title="6. 查看并访问 http://lb.lemon.com/"></a>6. 查看并访问 <a target="_blank" rel="noopener" href="http://lb.lemon.com/">http://lb.lemon.com/</a></h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wqrqpqxj30z20ao3zf.jpg" alt="image-20200521024919442"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wqv308bj30zp0akt9m.jpg" alt="image-20200521024935986"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wqydqqgj313s0q91kx.jpg" alt="image-20200521025224964"></p>
<ul>
<li><strong>思考一个问题：</strong><ul>
<li>如果我更新了一次代码，是不是还得要再来一次上面的操作步骤？</li>
<li>是的，所以就要用到下面  <code>jenkins</code> 的持续集成 + 持续部署 功能了。</li>
</ul>
</li>
</ul>
<h2 id="七、配置freestyle-monitor任务-持续集成-持续部署"><a href="#七、配置freestyle-monitor任务-持续集成-持续部署" class="headerlink" title="七、配置freestyle-monitor任务 持续集成 + 持续部署"></a>七、配置freestyle-monitor任务 持续集成 + 持续部署</h2><h4 id="1-将手动部署代码的操作编写成shell脚本，在由-jenkins-调度将其代码推送至web集群"><a href="#1-将手动部署代码的操作编写成shell脚本，在由-jenkins-调度将其代码推送至web集群" class="headerlink" title="1. 将手动部署代码的操作编写成shell脚本，在由 jenkins 调度将其代码推送至web集群"></a>1. 将手动部署代码的操作编写成shell脚本，在由 jenkins 调度将其代码推送至web集群</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@jenkins ~]<span class="comment"># mkdir /jekins_scripts                   #创建jenkins脚本存放目录[root@jenkins ~]# mkdir /jekins_code_tar                  #创建jenkins代码打包存放目录[root@jenkins ~]# vim /jekins_scripts/monitor_html.sh  #创建jenkins任务的相关脚本存放目录#!/bin/bash#时间戳DATE=`date +%Y-%m-%d-%H-%M-%S`#jenkins的项目目录,这里也可以直接用jenkins自身的 WORKSPACE 变量JENKINS_DIR=&quot;/var/lib/jenkins/workspace/freestyle-monitor&quot;#web集群的站点存放目录WEB_DIR=&quot;/code&quot;#web集群IP地址WEB_IP=&quot;192.168.2.4 192.168.2.5&quot;#进入到jenkins项目目录，并进行代码打包至/jekins_code_tar目录下，在将内容通过scp至web集群 并 进行新的代码上线env_build() &#123;       cd $&#123;JENKINS_DIR&#125; &amp;&amp; tar zcf /jekins_code_tar/web-$&#123;DATE&#125;.tar.gz ./*       for hosts in $WEB_IP;do            ssh root@$&#123;hosts&#125; &quot;if [ ! -d /web_backup ]; then mkdir /web_backup ; fi&quot;            scp /jekins_code_tar/web-$&#123;DATE&#125;.tar.gz root@$&#123;hosts&#125;:/web_backup            ssh root@$&#123;hosts&#125; &quot;rm -rf $&#123;WEB_DIR&#125;/* &amp;&amp; mkdir -p $&#123;WEB_DIR&#125;/web-$&#123;DATE&#125;&quot;            ssh root@$&#123;hosts&#125; &quot;tar xf /web_backup/web-$&#123;DATE&#125;.tar.gz -C $&#123;WEB_DIR&#125;/web-$&#123;DATE&#125;&quot;            ssh root@$&#123;hosts&#125; &quot;ln  -s $&#123;WEB_DIR&#125;/web-$&#123;DATE&#125; $&#123;WEB_DIR&#125;/web&quot;       done&#125;#调用env_build函数env_build[root@jenkins ~]# chmod -R +x /jekins_scripts#配置web节点免登[root@jenkins ~]# ssh-copy-id root@192.168.2.4[root@jenkins ~]# ssh-copy-id root@192.168.2.5</span></span><br></pre></td></tr></table></figure>



<h4 id="2-配置-freestyle-monitor-项目"><a href="#2-配置-freestyle-monitor-项目" class="headerlink" title="2. 配置 freestyle-monitor 项目"></a>2. 配置 freestyle-monitor 项目</h4><ul>
<li><strong>构建 – Execute shell</strong></li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wr4spf9j30ux0ik0un.jpg" alt="image-20200521114008140"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wradm4yj30rz0i73yy.jpg" alt="image-20200521114243497"></p>
<h4 id="3-构建此项目"><a href="#3-构建此项目" class="headerlink" title="3. 构建此项目"></a>3. 构建此项目</h4><ul>
<li><p>在构建之前先将web集群的页面和 <code>jenkins</code> 之前拉取下的代码全都删除，以便验证</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#jenkins服务器上[root@jenkins ~]# ll /var/lib/jenkins/workspace/总用量 0[root@jenkins ~]# ll /jekins_code_tar/总用量 0#web01服务器上[root@web01 ~]# ll /code/总用量 0[root@web01 ~]# ll /web_backupls: 无法访问/web_backup: 没有那个文件或目录#web02服务器上[root@web02 ~]# ll /code/总用量 0[root@web01 ~]# ll /web_backupls: 无法访问/web_backup: 没有那个文件或目录</span></span><br></pre></td></tr></table></figure></li>
<li><p>现在访问lb.lemon.com就会报错</p>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wrktsraj313t04bglo.jpg" alt="image-20200521114546597"></p>
<h4 id="4-模拟开发更新代码推送至远程仓库"><a href="#4-模拟开发更新代码推送至远程仓库" class="headerlink" title="4. 模拟开发更新代码推送至远程仓库"></a>4. 模拟开发更新代码推送至远程仓库</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev1 ~]<span class="comment"># cd monitor[root@dev1 monitor]# vim index.html +43&lt;a class=&quot;logo pull-left&quot; href=&quot;index.html&quot; style=&quot;width: 233px&quot;&gt;lemon管理平台&lt;/a&gt;:wq![root@dev1 monitor]# git add .[root@dev1 monitor]# git commit -m &quot;test&quot;[master 6cc63b2] test 1 file changed, 1 insertion(+), 1 deletion(-)[root@dev1 monitor]# git push origin masterCounting objects: 5, done.Compressing objects: 100% (3/3), done.Writing objects: 100% (3/3), 282 bytes | 0 bytes/s, done.Total 3 (delta 2), reused 0 (delta 0)To git@gitlab.lemon.com:java/monitor.git   481be52..6cc63b2  master -&gt; master</span></span><br></pre></td></tr></table></figure>



<h4 id="5-jenkins构建项目"><a href="#5-jenkins构建项目" class="headerlink" title="5. jenkins构建项目"></a>5. jenkins构建项目</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wrpf7g3j30ss0hdtah.jpg" alt="image-20200521114623360"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wrw3c3fj30pd0b10tf.jpg" alt="image-20200521114714801"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7ws6hj45j30sf0bvq43.jpg" alt="image-20200522005243240"></p>
<h4 id="6-然后在访问一下lb-lemon-com"><a href="#6-然后在访问一下lb-lemon-com" class="headerlink" title="6. 然后在访问一下lb.lemon.com"></a>6. 然后在访问一下lb.lemon.com</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wsalqr0j313t0pfnpb.jpg" alt="image-20200522011420421"></p>
<h4 id="7-查看对应的目录"><a href="#7-查看对应的目录" class="headerlink" title="7. 查看对应的目录"></a>7. 查看对应的目录</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#jenkins服务器上[root@jenkins ~]# ll  /var/lib/jenkins/workspace/总用量 4drwxr-xr-x 9 root root 4096 5月  22 00:50 freestyle-monitordrwxr-xr-x 2 root root    6 5月  22 00:50 freestyle-monitor@tmp[root@jenkins ~]# ll /jekins_code_tar/总用量 4552-rw-r--r-- 1 root root 4659825 5月  22 00:50 web-2020-05-22-00-50-30.tar.gz#web01服务器上[root@web01 ~]# ll /code/总用量 4lrwxrwxrwx 1 root root   29 5月  22 00:50 web -&gt; /code/web-2020-05-22-00-50-30drwxr-xr-x 8 root root 4096 5月  22 00:50 web-2020-05-22-00-50-30[root@web01 ~]# ll /web_backup总用量 4552-rw-r--r-- 1 root root 4659825 5月  22 00:50 web-2020-05-22-00-50-30.tar.gz#web02服务器上[root@web02 ~]# ll /code/总用量 4lrwxrwxrwx 1 root root   29 5月  22 00:50 web -&gt; /code/web-2020-05-22-00-50-30drwxr-xr-x 8 root root 4096 5月  22 00:50 web-2020-05-22-00-50-30[root@web02 ~]# ll /web_backup总用量 4552-rw-r--r-- 1 root root 4659825 5月  22 00:50 web-2020-05-22-00-50-30.tar.gz</span></span><br></pre></td></tr></table></figure>



<h4 id="8-注意事项："><a href="#8-注意事项：" class="headerlink" title="8. 注意事项："></a>8. 注意事项：</h4><p><strong>1. Jenkins的启动用户得是root，不然会报错！因为ssh免登用的是root用户做的</strong></p>
<p><strong>2. 如果做了上面的步骤后还是报错，就执行命令删除rm -rf known_hosts。</strong></p>
<p><strong>3. 以上就是一个简单的不能再简单的静态页面 持续集成 + 持续部署项目</strong></p>
<h4 id="9-现在这个项目的配置还存在一些问题"><a href="#9-现在这个项目的配置还存在一些问题" class="headerlink" title="9. 现在这个项目的配置还存在一些问题"></a>9. 现在这个项目的配置还存在一些问题</h4><ul>
<li><p>怎么指定要构建的版本？</p>
<ul>
<li>答：需要定义 参数化构建过程的（Choice Parameter 和 Git Parameter）</li>
</ul>
</li>
<li><p>怎么不让已经构建成功后项目 构建？</p>
<ul>
<li>答：使用 <code>jenkins</code> 自带的两个变量进行判断</li>
</ul>
</li>
</ul>
<h4 id="10-解决上面两个存在的问题"><a href="#10-解决上面两个存在的问题" class="headerlink" title="10. 解决上面两个存在的问题"></a>10. 解决上面两个存在的问题</h4><ul>
<li><strong>由于之前的上线方式是直接获取最新代码，它会对后期版本回退的困难。</strong></li>
<li><strong>如果采用tag方式，比如第一次上线 v1.1 、第二次上线 v1.2 ，如果上线 v1.2 出现问题后，我们还可以使用tag快速回退至上一个版本的 v1.1 。</strong></li>
</ul>
<h4 id="12-实现tag版本上线的思路"><a href="#12-实现tag版本上线的思路" class="headerlink" title="12. 实现tag版本上线的思路"></a>12. 实现tag版本上线的思路</h4><ol>
<li><strong>开发如果需要发布新版本上线，必须将当前的版本打上一个标签。</strong></li>
<li><strong>配置jenkins任务的参数化构建过程；Choice Parameter 和 Git Parameter</strong></li>
<li><strong>jenkins需要让其脚本支持传参，比如：用户传递 v1.1 则拉取项目的 v1.1 标签</strong></li>
</ol>
<h4 id="13-jenkins配置tag版本的部署"><a href="#13-jenkins配置tag版本的部署" class="headerlink" title="13. jenkins配置tag版本的部署"></a>13. jenkins配置tag版本的部署</h4><ul>
<li>首先安装 Git Parameter插件，然后配置jenkins参数化构建，再让用户构建时选择对应的tag版本。</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wshh486j30we0gtmz0.jpg" alt="image-20200521213401721"></p>
<ul>
<li>添加 参数化构建过程（This project is parameterized）—&gt; Choice Parameter —&gt; Git Parameter</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wslshm1j30sd0obabo.jpg" alt="image-20200521215729330"></p>
<ul>
<li>配置 Choice Parameter 选项参数</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wst8oioj30ma0bvdge.jpg" alt="image-20200522021453925"></p>
<ul>
<li>配置 Git Parameter 并  修改源码管理的 Git分支参数</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wt0qol4j30ma0blmxt.jpg" alt="image-20200522013349907"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wt5zaatj30sm0o9t9y.jpg" alt="image-20200522013610814"></p>
<ul>
<li>修改jenkins上的 monitor_html.sh 脚本</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@jenkins ~]<span class="comment"># vim /jekins_scripts/monitor_html.sh#!/bin/bash#时间戳DATE=`date +%Y-%m-%d-%H-%M-%S`DATE_TAG=$&#123;DATE&#125;-$&#123;GIT_VERSION&#125;#jenkins的项目目录,这里也可以直接用jenkins自身的 WORKSPACE 变量JENKINS_DIR=&quot;/var/lib/jenkins/workspace/freestyle-monitor&quot;#web集群的站点存放目录WEB_DIR=&quot;/code&quot;#web集群IP地址WEB_IP=&quot;192.168.2.4 192.168.2.5&quot;#进入到jenkins项目目录，并进行代码打包至/jekins_code_tar目录下，在将内容通过scp至web集群 并 进行新的代码上线env_build() &#123;       cd $&#123;JENKINS_DIR&#125; &amp;&amp; tar zcf /jekins_code_tar/web-$&#123;DATE_TAG&#125;.tar.gz ./*       for hosts in $WEB_IP;do            ssh root@$&#123;hosts&#125; &quot;if [ ! -d /web_backup ]; then mkdir /web_backup ; fi&quot;            scp /jekins_code_tar/web-$&#123;DATE_TAG&#125;.tar.gz root@$&#123;hosts&#125;:/web_backup            ssh root@$&#123;hosts&#125; &quot;rm -rf $&#123;WEB_DIR&#125;/* &amp;&amp; mkdir -p $&#123;WEB_DIR&#125;/web-$&#123;DATE_TAG&#125;&quot;            ssh root@$&#123;hosts&#125; &quot;tar xf /web_backup/web-$&#123;DATE_TAG&#125;.tar.gz -C $&#123;WEB_DIR&#125;/web-$&#123;DATE_TAG&#125;&quot;            ssh root@$&#123;hosts&#125; &quot;ln  -s $&#123;WEB_DIR&#125;/web-$&#123;DATE_TAG&#125; $&#123;WEB_DIR&#125;/web&quot;       done&#125;#jenkins这边保留最近提交的五个代码tar包，其余的全部删掉，web那里只保留三个tar包env_clear() &#123;       #-----------清除web节点的tar包(只保留三个)------       for hosts in $WEB_IP;do            ssh root@$&#123;hosts&#125; &quot;bash -x /opt/clear_latest.sh&quot;       done       #-----------清除jenkins节点的tar包(只保留五个)--       ReservedNum=5       FileDir=/jekins_code_tar       FileNum=$(ls -l $FileDir|grep ^- |wc -l)       while(( $FileNum &gt; $ReservedNum));do       OldFile=$(ls -rt $FileDir| head -1)            rm -rf $FileDir/$OldFile            let &quot;FileNum--&quot;       done       &#125;#判断到底是调用env_build函数 还是调用evn_clear函数；其实这里的值就是根据上面的 Choice Parameter 选项而定的if [ $BUILD_CLEAR == &quot;build&quot; ];then       env_buildelif [ $BUILD_CLEAR == &quot;clear&quot; ];then       env_clearfi</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在web节点上的opt目录下编写 clear_latest.sh 脚本（在此只实例web01，一样的内容）</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev1 ~]<span class="comment"># vim /opt/clear_latest.sh #!/bin/bash#保留文件数，这里只保留最新的前三个版本ReservedNum=3FileDir=/web_backupdate=$(date &quot;+%Y%m%d-%H%M%S&quot;)FileNum=$(ls -l $FileDir|grep ^- |wc -l)while(( $FileNum &gt; $ReservedNum));do    OldFile=$(ls -rt $FileDir| head -1)    echo  $date &quot;Delete File:&quot;$OldFile    rm -rf $FileDir/$OldFile    let &quot;FileNum--&quot;done[root@web01 ~]# chmod a+x /opt/clear_latest.sh</span></span><br></pre></td></tr></table></figure>

<ul>
<li>开发更新代码，推送至远程仓库并打上标签（这里我实际上推送了三个tag标签）</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev1 ~]<span class="comment"># cd monitor[root@dev1 monitor]# vim index.html +43&lt;a class=&quot;logo pull-left&quot; href=&quot;index.html&quot; style=&quot;width: 233px&quot;&gt;lemon管理平台 v1.1&lt;/a&gt;:wq![root@dev1 monitor]# git add .[root@dev1 monitor]# git commit -m &quot;v1.1&quot;[root@dev1 monitor]# git push origin master[root@dev1 monitor]# git tag -a &quot;v1.1&quot; -m &quot;v1.1&quot;[root@dev1 monitor]# git push origin v1.1</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查看一下效果 并 进行构建 并查看 控制台信息</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtecmnyj30sf0dtwfn.jpg" alt="image-20200522030745369"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wthhnflj60sf0b1wfi02.jpg" alt="image-20200522032613859"></p>
<ul>
<li>访问web服务查看是否更新到我想要的版本中</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtkvveyj313t0kde2o.jpg" alt="image-20200522032725481"></p>
<ul>
<li>查看我构建的tar包有多少了，然后使用clear清除（注意：此功能在工作环境上要慎重使用！！！！）</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtpwwoqj30uh09yq4d.jpg" alt="image-20200522033011358"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtsu67ij30th088t9t.jpg" alt="image-20200522033030405"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtw47k3j30vj088ab6.jpg" alt="image-20200522033044114"></p>
<ul>
<li>调用clear构建 –&gt; 就是在运行脚本中的env_clear函数 —&gt;  查看 控制台信息</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wtzqubmj30sf0dymy5.jpg" alt="image-20200522033129964"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wuadd2vj30q00auglx.jpg" alt="image-20200522034347752"></p>
<ul>
<li>与上面对比一下可以看到，这个功能也实现了</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wuh8f1sj30w506jmya.jpg" alt="image-20200522040612025"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wukgpytj30tk04yq3e.jpg" alt="image-20200522033703796"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wuo6tr8j30u904wwey.jpg" alt="image-20200522033717301"></p>
<h4 id="14-解决项目重复构建-和-无法精确回滚-的问题-可在生产环境使用"><a href="#14-解决项目重复构建-和-无法精确回滚-的问题-可在生产环境使用" class="headerlink" title="14. 解决项目重复构建 和 无法精确回滚 的问题 (可在生产环境使用)"></a>14. 解决项目重复构建 和 无法精确回滚 的问题 (可在生产环境使用)</h4><ul>
<li>在jenkins任务中的参数化构建中的选项构建那里 在添加一个rollback的选项参数</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wusus6nj30s60o4myk.jpg" alt="image-20200522094542164"></p>
<ul>
<li>修改脚本<ul>
<li>在脚本中添加一个 <code>env_rollabck</code> 的函数，并在脚本中使用 Jenkins自带的 <code>GIT_COMMIT</code> 和 <code>GIT_PREVIOUS_SUCCESSFUL_COMMIT</code>  进行判断</li>
</ul>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@jenkins ~]<span class="comment"># vim /jekins_scripts/monitor_html.sh#!/bin/bash#时间戳DATE=`date +%Y-%m-%d-%H-%M-%S`DATE_TAG=$&#123;DATE&#125;-$&#123;GIT_VERSION&#125;#jenkins的项目目录,这里也可以直接用jenkins自身的 WORKSPACE 变量JENKINS_DIR=&quot;/var/lib/jenkins/workspace/freestyle-monitor&quot;#web集群的站点存放目录WEB_DIR=&quot;/code&quot;#web集群IP地址WEB_IP=&quot;192.168.2.4 192.168.2.5&quot;#进入到jenkins项目目录，并进行代码打包至/jekins_code_tar目录下，在将内容通过scp至web集群 并 进行新的代码上线env_build() &#123;       cd $&#123;JENKINS_DIR&#125; &amp;&amp; tar zcf /jekins_code_tar/web-$&#123;DATE_TAG&#125;.tar.gz ./*       for hosts in $WEB_IP;do            ssh root@$&#123;hosts&#125; &quot;if [ ! -d /web_backup ]; then mkdir /web_backup ; fi&quot;            scp /jekins_code_tar/web-$&#123;DATE_TAG&#125;.tar.gz root@$&#123;hosts&#125;:/web_backup            ssh root@$&#123;hosts&#125; &quot;rm -rf $&#123;WEB_DIR&#125;/* &amp;&amp; mkdir -p $&#123;WEB_DIR&#125;/web-$&#123;DATE_TAG&#125;&quot;            ssh root@$&#123;hosts&#125; &quot;tar xf /web_backup/web-$&#123;DATE_TAG&#125;.tar.gz -C $&#123;WEB_DIR&#125;/web-$&#123;DATE_TAG&#125;&quot;            ssh root@$&#123;hosts&#125; &quot;ln  -s $&#123;WEB_DIR&#125;/web-$&#123;DATE_TAG&#125; $&#123;WEB_DIR&#125;/web&quot;       done&#125;#回滚函数env_rollback() &#123;       ROLL_BACKUP=`ssh root@192.168.2.4 &quot;find /web_backup -maxdepth 1 -type f -name &quot;*$&#123;GIT_VERSION&#125;*&quot; &quot;`       for hosts in $WEB_IP;do            ssh root@$&#123;hosts&#125; &quot;rm -rf $&#123;WEB_DIR&#125;/* &amp;&amp; mkdir -p $&#123;WEB_DIR&#125;/web-$&#123;DATE_TAG&#125;&quot;            ssh root@$&#123;hosts&#125; &quot;tar xf $&#123;ROLL_BACKUP&#125; -C $&#123;WEB_DIR&#125;/web-$&#123;DATE_TAG&#125;&quot;            ssh root@$&#123;hosts&#125; &quot;ln  -s $&#123;WEB_DIR&#125;/web-$&#123;DATE_TAG&#125; $&#123;WEB_DIR&#125;/web&quot;       done&#125;#jenkins这边保留最近提交的五个代码tar包，其余的全部删掉，web那里只保留三个tar包env_clear() &#123;       #-----------清除web节点的tar包(只保留三个)------       for hosts in $WEB_IP;do            ssh root@$&#123;hosts&#125; &quot;bash -x /opt/clear_latest.sh&quot;       done       #-----------清除jenkins节点的tar包(只保留五个)--       ReservedNum=5       FileDir=/jekins_code_tar       FileNum=$(ls -l $FileDir|grep ^- |wc -l)       while(( $FileNum &gt; $ReservedNum));do       OldFile=$(ls -rt $FileDir| head -1)            rm -rf $FileDir/$OldFile            let &quot;FileNum--&quot;       done       &#125;#判断到底是调用env_build函数 还是调用evn_clear函数，并且在构建的时候会先判断一下此#次构建的版本之前有没有构建够，如果构建过，那么将不再构建，如果没有，就构建此项目if [ $BUILD_CLEAR == &quot;build&quot; ];then       if [ $&#123;GIT_COMMIT&#125; == $&#123;GIT_PREVIOUS_SUCCESSFUL_COMMIT&#125; ];then                echo &quot;你已经成功构建过web-$&#123;DATE_TAG&#125;项目了&quot;                echo &quot;你可以直接使用rollback的方式进行回滚web-$&#123;DATE_TAG&#125;项目版本&quot;                exit 1       else                env_build       fielif [ $BUILD_CLEAR == &quot;rollback&quot; ];then       env_rollbackelif [ $BUILD_CLEAR == &quot;clear&quot; ];then       env_clearfi</span></span><br></pre></td></tr></table></figure>



<ul>
<li>开发在重新推送两个新的分支</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev1 ~]<span class="comment"># cd monitor[root@dev1 monitor]# vim index.html +43&lt;a class=&quot;logo pull-left&quot; href=&quot;index.html&quot; style=&quot;width: 233px&quot;&gt;lemon管理平台 v1.4 &lt;/a&gt;:wq![root@dev1 monitor]# git add .[root@dev1 monitor]# git commit -m &quot;v1.4&quot;[root@dev1 monitor]# git push origin master[root@dev1 monitor]# git tag -a &quot;v1.4&quot; -m &quot;v1.4&quot;[root@dev1 monitor]# git push origin v1.4[root@dev1 monitor]# vim index.html +43&lt;a class=&quot;logo pull-left&quot; href=&quot;index.html&quot; style=&quot;width: 233px&quot;&gt;lemon管理平台 v1.5 &lt;/a&gt;:wq![root@dev1 monitor]# git add .[root@dev1 monitor]# git commit -m &quot;v1.5&quot;[root@dev1 monitor]# git push origin master[root@dev1 monitor]# git tag -a &quot;v1.5&quot; -m &quot;v1.5&quot;[root@dev1 monitor]# git push origin v1.5</span></span><br></pre></td></tr></table></figure>



<ul>
<li>重复构建一下v1.5的版本</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wuzh3euj30x10hxjtt.jpg" alt="image-20200522101126718"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wv443abj30sf0m2tas.jpg" alt="image-20200522103032311"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wv7w5nvj30sf0e53zf.jpg" alt="image-20200522103116779"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wveu3huj30sf0luq4r.jpg" alt="image-20200522102810984"></p>
<ul>
<li>那比如我想在使用构建回到了v1.4的版本中，怎么才可以重新再回到v1.5版本的？<ul>
<li>答：使用我上面定义好的rollback函数会退就行了</li>
</ul>
</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wvs4yqtj30sf0f00tu.jpg" alt="image-20200522103401222"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wvvpqhaj30sf0f6t9v.jpg" alt="image-20200522103858070"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wvyxmsbj30sf0ftq46.jpg" alt="image-20200522110221733"></p>
<ul>
<li>再来测试清空tar包的功能还能否使用（注意：此功能在工作环境上要慎重使用！！！！）</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7ww38fy0j60u306kjs602.jpg" alt="image-20200522110429290"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7ww6x7b6j30th06mmxy.jpg" alt="image-20200522110438627"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwb57d6j60sf0flwfi02.jpg" alt="image-20200522110453895"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwed4lhj60sf0a0gly02.jpg" alt="image-20200522110520679"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwi67i9j30tn04ywex.jpg" alt="image-20200522110533954"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwlzzikj30tn04z3yy.jpg" alt="image-20200522110545403"></p>
<p><strong>注意：如果此时在想回退到v1.1 和v1.3 版本的时候会失败的，因为web节点上的这两个版本包已经被被我清空了，所以 clear这个函数在公司的时候要慎重使用！！！！【最好就别写这个函数方法最好】</strong></p>
<p><strong>至此，jenkins的使用就算是基本完成了，只要上面的内容会了，那么至于java项目那块基本上和上面的操作没有太大的区别</strong></p>
<h2 id="八、GitLab-Jenkins-Sonar-Qube-持续集成"><a href="#八、GitLab-Jenkins-Sonar-Qube-持续集成" class="headerlink" title="八、GitLab + Jenkins + Sonar Qube 持续集成"></a>八、GitLab + Jenkins + Sonar Qube 持续集成</h2><h3 id="1-java项目部署的基本概述"><a href="#1-java项目部署的基本概述" class="headerlink" title="1. java项目部署的基本概述"></a>1. java项目部署的基本概述</h3><h4 id="1-什么是-java-项目？"><a href="#1-什么是-java-项目？" class="headerlink" title="1. 什么是 java 项目？"></a>1. 什么是 java 项目？</h4><ul>
<li>简单来说就是用 java 编写的代码，我将其称为 java 项目</li>
</ul>
<h4 id="2-为什么java项目需要Maven编译？"><a href="#2-为什么java项目需要Maven编译？" class="headerlink" title="2. 为什么java项目需要Maven编译？"></a>2. 为什么java项目需要Maven编译？</h4><ul>
<li>由于 java 编写的代码是无法直接在服务器上运行的，需要使用Maven工具进行构建打成war包后才能在服务器上运行</li>
<li>简单理解：java 源代码就是你在菜市场的买回家的菜，你买了之后并不是直接放嘴里就吃的，而是先回到家里进行一次加工后（Maven）才吃的。</li>
</ul>
<h3 id="2-jenkins手动部署java项目至web集群"><a href="#2-jenkins手动部署java项目至web集群" class="headerlink" title="2. jenkins手动部署java项目至web集群"></a>2. jenkins手动部署java项目至web集群</h3><h4 id="1-搭建Nginx-Tomcat-MySQL-Sonar-Qube-集群"><a href="#1-搭建Nginx-Tomcat-MySQL-Sonar-Qube-集群" class="headerlink" title="1. 搭建Nginx + Tomcat + MySQL + Sonar Qube 集群"></a>1. 搭建Nginx + Tomcat + MySQL + Sonar Qube 集群</h4><ul>
<li>这里前 nginx 和 tomcat 这两部分的机器我们就不用考虑了，因为我们在上面就已经准备好了，我们只需要重新配置一下 nginx 负载均衡并在另外两台机器上安装一下Tomcat就行了。至于 MySQL 和 Sonar Qube 的话，我这里因机器不够用了，所以就直接把 MySQL 部署到 dev1 主机上 Sonar Qube 部署到 dev2 上就行了，不会有什么影响。</li>
</ul>
<ol>
<li>修改lb的 nginx 配置文件</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@lb ~]<span class="comment"># vim /etc/nginx/conf.d/proxy_lb.lemon.com.confupstream lb &#123;        server 192.168.2.4:8080;        server 192.168.2.5:8080;&#125;server &#123;        listen 80;        server_name lb.lemon.com;        root /code;        location / &#123;                proxy_pass http://lb;                proxy_set_header Host $http_host;                proxy_set_header X-Forward-For $remote_addr;        &#125;&#125;[root@lb ~]# systemctl restart nginx</span></span><br></pre></td></tr></table></figure>

<ul>
<li>现在访问负载均衡的话会报502错误，这很正常，因为我们还没有部署tomcat</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwsxypdj313t052jri.jpg" alt="image-20200523092927454"></p>
<ol start="2">
<li>在另外两台web节点上关闭 nginx 服务 并安装启动 Tomcat</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop nginxtar xf jdk-8u181-linux-x64.tar.gzmv jdk1.8.0_181 /usr/<span class="built_in">local</span>/javacat &lt;&lt;<span class="string">END&gt;&gt; /etc/profileexport JAVA_HOME=/usr/local/javaexport PATH=$JAVA_HOME/bin:$PATHexport CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/libENDsource /etc/profiletar xf apache-tomcat-8.5.32.tar.gzmv apache-tomcat-8.5.32 /usr/local/tomcat/usr/local/tomcat/bin/startup.sh netstat -anptu|grep &quot;8080&quot;tcp6       0      0 :::8080      :::*            LISTEN      1353/java</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在访问一下负载均衡</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wwwr0i4j313t0hy40s.jpg" alt="image-20200523093055372"></p>
<ul>
<li>但是看不出来是否已经负载均衡了，我们去修改两个tomcat的页面就行了</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]<span class="comment"># vim /usr/local/tomcat/webapps/ROOT/index.jsp +52&lt;h2&gt;Tomcat web01-192.168.2.4&lt;/h2&gt;#最好重启一下tomcat[root@web02 ~]# vim /usr/local/tomcat/webapps/ROOT/index.jsp +52&lt;h2&gt;Tomcat web02-192.168.2.5&lt;/h2&gt;#最好重启一下tomcat</span></span><br></pre></td></tr></table></figure>

<ul>
<li>再来访问</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wx4ormhj313c0c10u1.jpg" alt="image-20200523093517896"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wx46jl9j313t0c4ac7.jpg" alt="image-20200523093549527"></p>
<ol start="3">
<li>提前先在 dev1 节点上部署好 MySQL ，一会用的 Sonar Qube 的时候会使用，现在还用不上</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev1 ~]<span class="comment"># yum -y install mariadb-server[root@dev1 ~]# systemctl start mariadb;systemctl enable mariadb[root@dev1 ~]# mysqladmin -u root password &#x27;123123&#x27;[root@dev1 ~]# mysql -uroot -p123123Welcome to the MariaDB monitor.  Commands end with ; or \g.Your MariaDB connection id is 8Server version: 5.5.65-MariaDB MariaDB ServerCopyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.MariaDB [(none)]&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema || test               |+--------------------+4 rows in set (0.00 sec)MariaDB [(none)]&gt; exit</span></span><br></pre></td></tr></table></figure>



<h4 id="2-新建一个gitlab的-hello-world-项目仓库"><a href="#2-新建一个gitlab的-hello-world-项目仓库" class="headerlink" title="2. 新建一个gitlab的 hello world 项目仓库"></a>2. 新建一个gitlab的 hello world 项目仓库</h4><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wx9v2i6j313c0no40s.jpg" alt="image-20200523095831415"></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wxevzwrj60or01fdfm02.jpg" alt="image-20200523095953535"></p>
<h4 id="3-使用git将其java代码上传到hello-world仓库"><a href="#3-使用git将其java代码上传到hello-world仓库" class="headerlink" title="3. 使用git将其java代码上传到hello-world仓库"></a>3. 使用git将其java代码上传到hello-world仓库</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dev1 hello-world]<span class="comment"># pwd/root/hello-world[root@dev1 hello-world]# ll -a总用量 16-rw-r--r--  1 root root  700 12月 23 2018 .classpath-rw-r--r--  1 root root 1113 12月 23 2018 pom.xml-rw-r--r--  1 root root 1081 12月 23 2018 .projectdrwxr-xr-x  2 root root  322 6月  11 16:31 .settingsdrwxr-xr-x  3 root root   18 6月  11 16:31 srcdrwxr-xr-x  5 root root   56 6月  11 16:31 target-rw-r--r--  1 root root  491 12月 20 2018 time.java[root@dev1 hello-world]# git init初始化空的 Git 版本库于 /root/hello-world/.git/[root@dev1 hello-world]# git add .[root@dev1 hello-world]# git commit -m &quot;Initial commit&quot;[root@dev1 hello-world]# git remote add origin git@gitlab.lemon.com:java/hello-world.git[root@dev1 hello-world]# git push origin master[root@dev1 hello-world]# git tag -a &quot;v1.1&quot; -m &quot;v1.1&quot;[root@dev1 hello-world]# git push origin v1.1</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wxlgnnsj61050nkq4x02.jpg" alt="image-20200611163415669"></p>
<h4 id="4-在jenkins上拉取gitlab代码后手动编译成war包"><a href="#4-在jenkins上拉取gitlab代码后手动编译成war包" class="headerlink" title="4. 在jenkins上拉取gitlab代码后手动编译成war包"></a>4. 在jenkins上拉取gitlab代码后手动编译成war包</h4><ul>
<li><p>安装maven，由于我之前就安装过了 <code>JDK</code>  和  <code>maven</code>，所以这里就不用安装了，直接跳过</p>
</li>
<li><p>克隆刚才上传的 java 项目 并 手动编译成war包</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@jenkins ~]<span class="comment"># git clone git@gitlab.lemon.com:java/hello-world.git[root@jenkins ~]# cd hello-world/[root@jenkins hello-world]# mvn package -D maven.test.skip=true      #-D 跳过测试用例</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wxpspj5j314b0b875d.jpg" alt="image-20200523103930568"></p>
<ul>
<li>将其编译好的 <code>war包</code>  <code>scp</code> 到web节点的对应位置下</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#停止两台tomcat服务[root@web01 ~]# /usr/local/tomcat/bin/shutdown.sh#删除tomcat默认页面[root@jenkins hello-world]# for i in 192.168.2.&#123;4..5&#125;;do ssh root@$i &quot;rm -rf /usr/local/tomcat/webapps/ROOT&quot;; done#将编译好的test1.war包scp至web节点上[root@jenkins hello-world]# for i in 192.168.2.&#123;4..5&#125;;do scp target/test1.war root@$i:/usr/local/tomcat/webapps/ROOT.war; done#查看war包是否拷贝过去[root@jenkins hello-world]# for i in 192.168.2.&#123;4..5&#125;;do ssh root@$i &quot;ls -h /usr/local/tomcat/webapps/ROOT*&quot;; done/usr/local/tomcat/webapps/ROOT.war/usr/local/tomcat/webapps/ROOT.war#启动两台tomcat服务；会自动生成一个ROOT网站目录[root@web01 ~]# /usr/local/tomcat/bin/startup.sh[root@web01 ~]# ll /usr/local/tomcat/webapps/总用量 32drwxr-x--- 14 root root  4096 6月  11 16:20 docsdrwxr-x---  6 root root    83 6月  11 16:20 examplesdrwxr-x---  5 root root    87 6月  11 16:20 host-managerdrwxr-x---  5 root root   103 6月  11 16:20 managerdrwxr-x---  4 root root    54 6月  11 17:00 ROOT-rw-r--r--  1 root root 24711 6月  11 16:59 ROOT.war</span></span><br></pre></td></tr></table></figure>

<ul>
<li>访问</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr7wxve23zj30qu04rq2x.jpg" alt="image-20200523105432256"></p>
<p>==以上就是手动部署 java 代码的流程==</p>
<h3 id="3-jenkins-自动化部署-java-项目至web集群"><a href="#3-jenkins-自动化部署-java-项目至web集群" class="headerlink" title="3. jenkins 自动化部署 java 项目至web集群"></a>3. jenkins 自动化部署 java 项目至web集群</h3>
    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/06/06/MySQL/" rel="prev" title="MySQL">
      <i class="fa fa-chevron-left"></i> MySQL
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#GitLab-Jenkins-%E5%9F%BA%E6%9C%AC%E8%BF%87%E7%A8%8B"><span class="nav-number">1.</span> <span class="nav-text">GitLab + Jenkins 基本过程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E3%80%81%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E3%80%81%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2"><span class="nav-number">1.1.</span> <span class="nav-text">一、持续集成、持续交付、持续部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="nav-number">1.1.1.</span> <span class="nav-text">1. 概述：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90-CI"><span class="nav-number">1.1.2.</span> <span class="nav-text">2. 持续集成(CI)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98-CD"><span class="nav-number">1.1.3.</span> <span class="nav-text">3. 持续交付(CD)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2%EF%BC%88CD%EF%BC%89"><span class="nav-number">1.1.4.</span> <span class="nav-text">4. 持续部署（CD）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E9%9B%86%E6%88%90-amp-%E4%BA%A4%E4%BB%98%E8%BD%AF%E4%BB%B6"><span class="nav-number">1.1.5.</span> <span class="nav-text">5. 集成 &amp; 交付软件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81Git%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-number">1.2.</span> <span class="nav-text">二、Git版本控制器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Git%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="nav-number">1.2.1.</span> <span class="nav-text">1. Git架构图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%9B%9B%E4%B8%AA%E5%8C%BA%E5%9F%9F%E5%92%8C%E4%BA%94%E7%A7%8D%E7%8A%B6%E6%80%81"><span class="nav-number">1.2.2.</span> <span class="nav-text">2. 四个区域和五种状态</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E5%9B%9B%E4%B8%AA%E5%8C%BA%E5%9F%9F"><span class="nav-number">1.2.2.0.1.</span> <span class="nav-text">1. 四个区域</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E4%BA%94%E7%A7%8D%E7%8A%B6%E6%80%81"><span class="nav-number">1.2.2.0.2.</span> <span class="nav-text">2. 五种状态</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%AE%89%E8%A3%85git"><span class="nav-number">1.2.3.</span> <span class="nav-text">3. 安装git</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%B8%B8%E8%A7%81%E7%9A%84-Git-%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="nav-number">1.2.4.</span> <span class="nav-text">4. 常见的 Git 命令：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E9%85%8D%E7%BD%AEgit"><span class="nav-number">1.2.5.</span> <span class="nav-text">5. 配置git</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E6%A3%80%E6%9F%A5%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF"><span class="nav-number">1.2.6.</span> <span class="nav-text">6. 检查配置信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="nav-number">1.2.7.</span> <span class="nav-text">7. 基本使用案例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E6%88%98%EF%BC%88%E4%B8%80%EF%BC%89git%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E7%9A%84%E6%8F%90%E4%BA%A4%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%E8%87%B3%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%EF%BC%9F"><span class="nav-number">1.2.7.0.1.</span> <span class="nav-text">实战（一）git如何快速的提交目录文件至本地仓库？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89git-%E5%A6%82%E4%BD%95%E5%B0%86%E6%96%87%E4%BB%B6%E6%94%B9%E5%90%8D%E5%B9%B6%E9%87%8D%E6%96%B0%E6%8F%90%E4%BA%A4%E5%88%B0%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%EF%BC%9F"><span class="nav-number">1.2.7.0.2.</span> <span class="nav-text">实战（二）git 如何将文件改名并重新提交到本地仓库？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E6%88%98%EF%BC%88%E4%B8%89%EF%BC%89%E5%A6%82%E4%BD%95%E6%AF%94%E5%AF%B9-%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E3%80%81%E6%9A%82%E5%AD%98%E5%8C%BA%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E3%80%81%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B7%AE%E5%BD%B9%EF%BC%9F"><span class="nav-number">1.2.7.0.3.</span> <span class="nav-text">实战（三）如何比对 工作目录文件内容、暂存区文件内容、本地仓库文件内容之间的差役？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E6%88%98%EF%BC%88%E5%9B%9B%EF%BC%89%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3git-commit-%E6%8F%90%E4%BA%A4%E6%93%8D%E4%BD%9C%EF%BC%9F"><span class="nav-number">1.2.7.0.4.</span> <span class="nav-text">实战（四）如何理解git  commit 提交操作？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%94%EF%BC%89git-%E4%BF%9D%E5%AD%98%E4%BA%86%E7%8A%B6%E6%80%81%E5%90%8E%EF%BC%8C%E6%83%B3%E5%9B%9E%E9%80%80%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F"><span class="nav-number">1.2.7.0.5.</span> <span class="nav-text">实战（五）git 保存了状态后，想回退怎么办？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E6%88%98%EF%BC%88%E5%85%AD%EF%BC%89%E5%9B%9E%E6%BB%9A%E7%89%88%E6%9C%AC%EF%BC%8C%E5%9B%9E%E6%BB%9A%E4%B9%8B%E5%89%8D%E7%9A%84%E7%89%88%E6%9C%AC-%E5%92%8C-%E5%9B%9E%E6%BB%9A%E4%B9%8B%E5%90%8E%E7%9A%84%E7%89%88%E6%9C%AC"><span class="nav-number">1.2.7.0.6.</span> <span class="nav-text">实战（六）回滚版本，回滚之前的版本 和 回滚之后的版本</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-Git-%E6%A0%87%E7%AD%BE%E7%9A%84-%E5%88%9B%E5%BB%BA-%E5%88%A0%E9%99%A4"><span class="nav-number">1.2.8.</span> <span class="nav-text">8. Git 标签的 创建 删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-Git-%E5%88%86%E6%94%AF"><span class="nav-number">1.2.9.</span> <span class="nav-text">9. Git 分支</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E6%A6%82%E5%BF%B5"><span class="nav-number">1.2.9.0.1.</span> <span class="nav-text">1. 概念</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E5%88%9B%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF%E5%8E%9F%E7%90%86"><span class="nav-number">1.2.9.0.2.</span> <span class="nav-text">2. 创建与合并分支原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%88%86%E6%94%AF%E5%91%BD%E4%BB%A4"><span class="nav-number">1.2.9.0.3.</span> <span class="nav-text">3. 常见的分支命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-%E5%88%86%E6%94%AF%E7%9A%84%E4%BD%BF%E7%94%A8%E6%BC%94%E7%A4%BA"><span class="nav-number">1.2.9.0.4.</span> <span class="nav-text">4. 分支的使用演示</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-%E5%88%86%E6%94%AF%E5%86%B2%E7%AA%81"><span class="nav-number">1.2.9.0.5.</span> <span class="nav-text">5. 分支冲突</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-Git%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93-%E2%80%93-github"><span class="nav-number">1.2.10.</span> <span class="nav-text">10. Git远程仓库 – github</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-github-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">1.2.10.0.1.</span> <span class="nav-text">1.  github 是什么</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E7%99%BB%E9%99%86-github"><span class="nav-number">1.2.10.0.2.</span> <span class="nav-text">2. 登陆 github</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E5%88%9B%E5%BB%BA%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">1.2.10.0.3.</span> <span class="nav-text">3. 创建远程仓库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-%E4%BD%BF%E7%94%A8-github"><span class="nav-number">1.2.10.0.4.</span> <span class="nav-text">4. 使用 github</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-git-%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81%E7%9A%84%E6%95%B4%E4%BD%93%E8%BF%87%E7%A8%8B"><span class="nav-number">1.2.11.</span> <span class="nav-text">11. git 推送代码的整体过程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81Gitlab-%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93"><span class="nav-number">1.3.</span> <span class="nav-text">三、Gitlab 代码仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%AE%80%E4%BB%8B%E6%A6%82%E8%BF%B0"><span class="nav-number">1.3.1.</span> <span class="nav-text">1. 简介概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E4%BB%80%E4%B9%88%E6%98%AF-Gitlab"><span class="nav-number">1.3.2.</span> <span class="nav-text">2. 什么是 Gitlab</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-GitLab-%E4%B8%8E-GitHub-%E7%9A%84%E4%B8%8D%E5%90%8C"><span class="nav-number">1.3.3.</span> <span class="nav-text">3. GitLab 与 GitHub 的不同</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Gitlab-%E7%9A%84%E4%BC%98%E5%8A%BF%E5%92%8C%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">1.3.4.</span> <span class="nav-text">4. Gitlab 的优势和应用场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-GitLab-%E4%B8%BB%E8%A6%81%E6%9C%8D%E5%8A%A1%E6%9E%84%E6%88%90"><span class="nav-number">1.3.5.</span> <span class="nav-text">5. GitLab 主要服务构成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-GitLab-%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="nav-number">1.3.6.</span> <span class="nav-text">6. GitLab 的工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E5%AE%89%E8%A3%85-Gitlab-%E4%BB%93%E5%BA%93%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.3.7.</span> <span class="nav-text">7. 安装 Gitlab 仓库系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0hosts%E8%A7%A3%E6%9E%90%E6%96%87%E4%BB%B6"><span class="nav-number">1.3.7.1.</span> <span class="nav-text">添加hosts解析文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Gitlab-%E4%BE%9D%E8%B5%96"><span class="nav-number">1.3.7.2.</span> <span class="nav-text">安装 Gitlab 依赖</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Gitlab-12-0-3-%E7%89%88%E6%9C%AC"><span class="nav-number">1.3.7.3.</span> <span class="nav-text">安装 Gitlab-12.0.3 版本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Gitlab-%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4"><span class="nav-number">1.3.7.4.</span> <span class="nav-text">Gitlab 管理命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%B9%B6%E5%90%AF%E5%8A%A8-Gitlab"><span class="nav-number">1.3.7.5.</span> <span class="nav-text">修改配置文件并启动 Gitlab</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B1%89%E5%8C%96-Gitlab"><span class="nav-number">1.3.7.6.</span> <span class="nav-text">汉化 Gitlab</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B5%8B%E8%AF%95"><span class="nav-number">1.3.7.7.</span> <span class="nav-text">访问浏览器测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-Gitlab-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="nav-number">1.3.8.</span> <span class="nav-text">8. Gitlab 权限管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAGroup%EF%BC%8CUser%EF%BC%8CProject"><span class="nav-number">1.3.8.1.</span> <span class="nav-text">创建Group，User，Project</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BB%84%EF%BC%8C%E7%BB%84%E5%90%8D%E4%B8%BAjava"><span class="nav-number">1.3.8.2.</span> <span class="nav-text">创建一个组，组名为java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAPM%E7%9A%84%E7%94%A8%E6%88%B7%E4%BD%9C%E4%B8%BA%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E8%80%85%E5%B9%B6%E5%8A%A0%E5%85%A5%E5%88%B0java%E7%BB%84%E5%86%85"><span class="nav-number">1.3.8.3.</span> <span class="nav-text">创建一个PM的用户作为项目管理者并加入到java组内</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%86pm%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7%E5%8A%A0%E5%85%A5%E5%88%B0java%E7%BB%84%E5%86%85"><span class="nav-number">1.3.8.4.</span> <span class="nav-text">将pm管理用户加入到java组内</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8PM%E7%94%A8%E6%88%B7%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AEapp1"><span class="nav-number">1.3.8.5.</span> <span class="nav-text">用PM用户创建一个项目app1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8-gitlab-%E7%99%BB%E9%99%86%E9%A1%B5%E9%9D%A2%E4%B8%8B%E5%88%9B%E5%BB%BA-dev1-dev2-%E7%94%A8%E6%88%B7%EF%BC%8C%E5%B9%B6%E4%BD%9C%E4%B8%BA%E5%BC%80%E5%8F%91%E8%80%85%E5%8A%A0%E5%85%A5%E5%88%B0-app1-%E9%A1%B9%E7%9B%AE%E4%B8%AD"><span class="nav-number">1.3.8.6.</span> <span class="nav-text">在 gitlab 登陆页面下创建 dev1 dev2 用户，并作为开发者加入到 app1 项目中</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-gitlab-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">1.3.9.</span> <span class="nav-text">9. gitlab 的基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%86-dev1-%E6%8C%81%E6%9C%89%E4%BA%BA%E7%9A%84%E5%85%AC%E9%92%A5%E6%94%BE%E5%88%B0-dev1-%E8%B4%A6%E5%8F%B7%E4%B8%8B"><span class="nav-number">1.3.9.1.</span> <span class="nav-text">将 dev1 持有人的公钥放到 dev1 账号下</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A5ssh%E5%8D%8F%E8%AE%AE%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81%E8%87%B3%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">1.3.9.2.</span> <span class="nav-text">以ssh协议推送代码至远程仓库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8B%E9%9D%A2%E4%BB%A5PM%E7%94%A8%E6%88%B7%E8%BF%9B%E8%A1%8C%E5%88%9B%E5%BB%BA%E5%BC%80%E5%8F%91%E8%AE%A1%E5%88%92%E5%88%86%E9%85%8D%E7%BB%99dev2"><span class="nav-number">1.3.9.3.</span> <span class="nav-text">下面以PM用户进行创建开发计划分配给dev2</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA-%E5%AE%98%E7%BD%91-V1-0-%E7%89%88%E6%9C%AC%EF%BC%8C%E5%8C%85%E5%90%AB%E9%A6%96%E9%A1%B5%E5%92%8C%E6%96%B0%E9%97%BB"><span class="nav-number">1.3.9.3.1.</span> <span class="nav-text">开发一个 官网 V1.0 版本，包含首页和新闻</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8dev2%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E6%9F%A5%E7%9C%8B%EF%BC%8C%E4%BC%9A%E6%9C%89%E4%BB%BB%E5%8A%A1%E6%8F%90%E7%A4%BA"><span class="nav-number">1.3.9.3.2.</span> <span class="nav-text">使用dev2用户登录查看，会有任务提示</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#dev2-%E5%BC%80%E5%8F%91%E8%80%85%E6%94%B6%E5%88%B0%E4%BB%BB%E5%8A%A1%EF%BC%8C%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%8F%91"><span class="nav-number">1.3.9.3.3.</span> <span class="nav-text">dev2 开发者收到任务，进行开发</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B0%86%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%85%AC%E9%92%A5%EF%BC%88id-rsa-pub%EF%BC%89%E6%94%BE%E8%BF%9B-dev2-%E8%B4%A6%E6%88%B7%E4%B8%AD"><span class="nav-number">1.3.9.3.4.</span> <span class="nav-text">将客户端公钥（id_rsa.pub）放进 dev2 账户中</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%8F%91"><span class="nav-number">1.3.9.3.5.</span> <span class="nav-text">进行开发</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9B%9E%E5%88%B0-gitlab-%E4%B8%8A%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E6%9C%89%E5%88%9A%E6%89%8D%E5%88%9B%E5%BB%BA%E7%9A%84%E5%88%86%E6%94%AF%EF%BC%8C%E7%82%B9%E5%87%BB%E2%80%9DMerge-request%E2%80%9D%E5%90%88%E5%B9%B6%E5%88%86%E6%94%AF%E8%AF%B7%E6%B1%82%EF%BC%8C%E4%B9%8B%E5%90%8EPM%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E5%A4%84%E7%90%86%E5%90%88%E5%B9%B6%E8%AF%B7%E6%B1%82%E3%80%82%E6%AD%A4%E6%97%B6%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%8A%9F%E8%83%BD%E7%9A%84%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B%E5%B0%B1%E5%AE%8C%E6%88%90%E3%80%82"><span class="nav-number">1.3.9.3.6.</span> <span class="nav-text">回到 gitlab 上可以看到有刚才创建的分支，点击”Merge request”合并分支请求，之后PM用户登录处理合并请求。此时，一个功能的开发流程就完成。</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%99%BB%E9%99%86PM%E7%94%A8%E6%88%B7%E5%90%88%E5%B9%B6%E8%AF%B7%E6%B1%82"><span class="nav-number">1.3.9.3.7.</span> <span class="nav-text">登陆PM用户合并请求</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E5%88%86%E6%94%AF%E6%98%AF%E5%90%A6%E5%90%88%E5%B9%B6"><span class="nav-number">1.3.9.3.8.</span> <span class="nav-text">验证分支是否合并</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-Gitlab-%E7%9A%84%E5%A4%87%E4%BB%BD%E5%92%8C%E6%81%A2%E5%A4%8D"><span class="nav-number">1.3.10.</span> <span class="nav-text">10. Gitlab 的备份和恢复</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%A4%87%E4%BB%BD%E7%9B%AE%E5%BD%95%EF%BC%8C%E5%B9%B6%E6%8E%88%E6%9D%83"><span class="nav-number">1.3.10.0.1.</span> <span class="nav-text">创建备份目录，并授权</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9-gitlab-%E9%85%8D%E7%BD%AE"><span class="nav-number">1.3.10.0.2.</span> <span class="nav-text">修改 gitlab 配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%87%E4%BB%BD"><span class="nav-number">1.3.10.0.3.</span> <span class="nav-text">备份</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-%E6%95%B4%E4%BD%93%E6%80%BB%E7%BB%93"><span class="nav-number">1.3.11.</span> <span class="nav-text">11. 整体总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2-jenkins"><span class="nav-number">1.4.</span> <span class="nav-text">四、部署 jenkins</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85-JDK-%E5%92%8C-Maven"><span class="nav-number">1.4.0.1.</span> <span class="nav-text">1. 安装 JDK 和 Maven</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E4%B8%8B%E8%BD%BD-jenkins-rpm-%E5%8C%85%E5%B9%B6%E5%AE%89%E8%A3%85"><span class="nav-number">1.4.0.2.</span> <span class="nav-text">2. 下载 jenkins-rpm 包并安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-jenkins-%E7%9A%84%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.4.0.3.</span> <span class="nav-text">3. jenkins 的目录介绍</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E8%B7%B3%E8%BF%87-jenkins-%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="nav-number">1.4.0.4.</span> <span class="nav-text">4. 跳过 jenkins 插件安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E6%9B%B4%E6%8D%A2jenkins%E6%8F%92%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%BA%90"><span class="nav-number">1.4.0.5.</span> <span class="nav-text">5. 更换jenkins插件下载源</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85-jenkins-%E6%8F%92%E4%BB%B6"><span class="nav-number">1.4.0.6.</span> <span class="nav-text">6.离线安装 jenkins 插件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81Jenkins-%E9%9B%86%E6%88%90-Gitlab%EF%BC%88%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%EF%BC%89"><span class="nav-number">1.5.</span> <span class="nav-text">五、Jenkins 集成 Gitlab（持续集成）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%9C%A8-gitlab-%E4%B8%8A%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%B9%B6%E5%B0%86%E4%BB%A3%E7%A0%81%E6%8E%A8%E9%80%81%E4%B8%8A%E5%8E%BB"><span class="nav-number">1.5.0.1.</span> <span class="nav-text">1. 在 gitlab 上创建项目并将代码推送上去</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E4%B8%8B%E8%BD%BD%E9%9B%86%E6%88%90-gitlab-%E7%9A%84%E6%8F%92%E4%BB%B6"><span class="nav-number">1.5.0.2.</span> <span class="nav-text">2. 下载集成 gitlab 的插件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E5%9C%A8-jenkins-%E9%87%8C%E9%85%8D%E7%BD%AE%E5%AE%9E%E7%8E%B0%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90"><span class="nav-number">1.5.0.3.</span> <span class="nav-text">3. 在 jenkins 里配置实现持续集成</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E7%82%B9%E5%87%BB%E7%AB%8B%E5%8D%B3%E6%9E%84%E5%BB%BA"><span class="nav-number">1.5.0.4.</span> <span class="nav-text">4. 点击立即构建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E6%9E%84%E5%BB%BA%E6%88%90%E5%8A%9F%E5%90%8E%E7%82%B9%E5%87%BB-%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%87%BA-%E5%92%8C-%E5%B7%A5%E4%BD%9C%E5%8C%BA"><span class="nav-number">1.5.0.5.</span> <span class="nav-text">5. 构建成功后点击 控制台输出 和 工作区</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E6%90%AD%E5%BB%BAweb%E9%9B%86%E7%BE%A4"><span class="nav-number">1.6.</span> <span class="nav-text">六、搭建web集群</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%9C%A8%E8%BF%99%E4%B8%89%E5%8F%B0%E8%8A%82%E7%82%B9%E4%B8%8A%E9%83%BD%E5%AE%89%E8%A3%85nginx%EF%BC%88%E6%93%8D%E4%BD%9C%E7%9B%B8%E5%90%8C%EF%BC%89"><span class="nav-number">1.6.0.1.</span> <span class="nav-text">1. 在这三台节点上都安装nginx（操作相同）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E9%85%8D%E7%BD%AE-lb-%E4%B8%BB%E6%9C%BA"><span class="nav-number">1.6.0.2.</span> <span class="nav-text">2. 配置 lb 主机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E9%85%8D%E7%BD%AE-web01-%E4%B8%BB%E6%9C%BA"><span class="nav-number">1.6.0.3.</span> <span class="nav-text">3. 配置 web01 主机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E9%85%8D%E7%BD%AE-web02-%E4%B8%BB%E6%9C%BA"><span class="nav-number">1.6.0.4.</span> <span class="nav-text">4. 配置 web02 主机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E5%B0%86-jenkins-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84%E4%BB%A3%E7%A0%81%E6%8B%B7%E8%B4%9D%E5%88%B0%E4%B8%A4%E5%8F%B0web%E8%8A%82%E7%82%B9%E4%B8%8A"><span class="nav-number">1.6.0.5.</span> <span class="nav-text">5. 将 jenkins 服务器上的代码拷贝到两台web节点上</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-%E6%9F%A5%E7%9C%8B%E5%B9%B6%E8%AE%BF%E9%97%AE-http-lb-lemon-com"><span class="nav-number">1.6.0.6.</span> <span class="nav-text">6. 查看并访问 http:&#x2F;&#x2F;lb.lemon.com&#x2F;</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81%E9%85%8D%E7%BD%AEfreestyle-monitor%E4%BB%BB%E5%8A%A1-%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90-%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2"><span class="nav-number">1.7.</span> <span class="nav-text">七、配置freestyle-monitor任务 持续集成 + 持续部署</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%B0%86%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2%E4%BB%A3%E7%A0%81%E7%9A%84%E6%93%8D%E4%BD%9C%E7%BC%96%E5%86%99%E6%88%90shell%E8%84%9A%E6%9C%AC%EF%BC%8C%E5%9C%A8%E7%94%B1-jenkins-%E8%B0%83%E5%BA%A6%E5%B0%86%E5%85%B6%E4%BB%A3%E7%A0%81%E6%8E%A8%E9%80%81%E8%87%B3web%E9%9B%86%E7%BE%A4"><span class="nav-number">1.7.0.1.</span> <span class="nav-text">1. 将手动部署代码的操作编写成shell脚本，在由 jenkins 调度将其代码推送至web集群</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E9%85%8D%E7%BD%AE-freestyle-monitor-%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.7.0.2.</span> <span class="nav-text">2. 配置 freestyle-monitor 项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E6%9E%84%E5%BB%BA%E6%AD%A4%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.7.0.3.</span> <span class="nav-text">3. 构建此项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E6%A8%A1%E6%8B%9F%E5%BC%80%E5%8F%91%E6%9B%B4%E6%96%B0%E4%BB%A3%E7%A0%81%E6%8E%A8%E9%80%81%E8%87%B3%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93"><span class="nav-number">1.7.0.4.</span> <span class="nav-text">4. 模拟开发更新代码推送至远程仓库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-jenkins%E6%9E%84%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.7.0.5.</span> <span class="nav-text">5. jenkins构建项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-%E7%84%B6%E5%90%8E%E5%9C%A8%E8%AE%BF%E9%97%AE%E4%B8%80%E4%B8%8Blb-lemon-com"><span class="nav-number">1.7.0.6.</span> <span class="nav-text">6. 然后在访问一下lb.lemon.com</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-%E6%9F%A5%E7%9C%8B%E5%AF%B9%E5%BA%94%E7%9A%84%E7%9B%AE%E5%BD%95"><span class="nav-number">1.7.0.7.</span> <span class="nav-text">7. 查看对应的目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%9A"><span class="nav-number">1.7.0.8.</span> <span class="nav-text">8. 注意事项：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-%E7%8E%B0%E5%9C%A8%E8%BF%99%E4%B8%AA%E9%A1%B9%E7%9B%AE%E7%9A%84%E9%85%8D%E7%BD%AE%E8%BF%98%E5%AD%98%E5%9C%A8%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98"><span class="nav-number">1.7.0.9.</span> <span class="nav-text">9. 现在这个项目的配置还存在一些问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-%E8%A7%A3%E5%86%B3%E4%B8%8A%E9%9D%A2%E4%B8%A4%E4%B8%AA%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">1.7.0.10.</span> <span class="nav-text">10. 解决上面两个存在的问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#12-%E5%AE%9E%E7%8E%B0tag%E7%89%88%E6%9C%AC%E4%B8%8A%E7%BA%BF%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="nav-number">1.7.0.11.</span> <span class="nav-text">12. 实现tag版本上线的思路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#13-jenkins%E9%85%8D%E7%BD%AEtag%E7%89%88%E6%9C%AC%E7%9A%84%E9%83%A8%E7%BD%B2"><span class="nav-number">1.7.0.12.</span> <span class="nav-text">13. jenkins配置tag版本的部署</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#14-%E8%A7%A3%E5%86%B3%E9%A1%B9%E7%9B%AE%E9%87%8D%E5%A4%8D%E6%9E%84%E5%BB%BA-%E5%92%8C-%E6%97%A0%E6%B3%95%E7%B2%BE%E7%A1%AE%E5%9B%9E%E6%BB%9A-%E7%9A%84%E9%97%AE%E9%A2%98-%E5%8F%AF%E5%9C%A8%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%BD%BF%E7%94%A8"><span class="nav-number">1.7.0.13.</span> <span class="nav-text">14. 解决项目重复构建 和 无法精确回滚 的问题 (可在生产环境使用)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81GitLab-Jenkins-Sonar-Qube-%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90"><span class="nav-number">1.8.</span> <span class="nav-text">八、GitLab + Jenkins + Sonar Qube 持续集成</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-java%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E8%BF%B0"><span class="nav-number">1.8.1.</span> <span class="nav-text">1. java项目部署的基本概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF-java-%E9%A1%B9%E7%9B%AE%EF%BC%9F"><span class="nav-number">1.8.1.1.</span> <span class="nav-text">1. 什么是 java 项目？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E4%B8%BA%E4%BB%80%E4%B9%88java%E9%A1%B9%E7%9B%AE%E9%9C%80%E8%A6%81Maven%E7%BC%96%E8%AF%91%EF%BC%9F"><span class="nav-number">1.8.1.2.</span> <span class="nav-text">2. 为什么java项目需要Maven编译？</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-jenkins%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2java%E9%A1%B9%E7%9B%AE%E8%87%B3web%E9%9B%86%E7%BE%A4"><span class="nav-number">1.8.2.</span> <span class="nav-text">2. jenkins手动部署java项目至web集群</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%90%AD%E5%BB%BANginx-Tomcat-MySQL-Sonar-Qube-%E9%9B%86%E7%BE%A4"><span class="nav-number">1.8.2.1.</span> <span class="nav-text">1. 搭建Nginx + Tomcat + MySQL + Sonar Qube 集群</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AAgitlab%E7%9A%84-hello-world-%E9%A1%B9%E7%9B%AE%E4%BB%93%E5%BA%93"><span class="nav-number">1.8.2.2.</span> <span class="nav-text">2. 新建一个gitlab的 hello world 项目仓库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E4%BD%BF%E7%94%A8git%E5%B0%86%E5%85%B6java%E4%BB%A3%E7%A0%81%E4%B8%8A%E4%BC%A0%E5%88%B0hello-world%E4%BB%93%E5%BA%93"><span class="nav-number">1.8.2.3.</span> <span class="nav-text">3. 使用git将其java代码上传到hello-world仓库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E5%9C%A8jenkins%E4%B8%8A%E6%8B%89%E5%8F%96gitlab%E4%BB%A3%E7%A0%81%E5%90%8E%E6%89%8B%E5%8A%A8%E7%BC%96%E8%AF%91%E6%88%90war%E5%8C%85"><span class="nav-number">1.8.2.4.</span> <span class="nav-text">4. 在jenkins上拉取gitlab代码后手动编译成war包</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-jenkins-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2-java-%E9%A1%B9%E7%9B%AE%E8%87%B3web%E9%9B%86%E7%BE%A4"><span class="nav-number">1.8.3.</span> <span class="nav-text">3. jenkins 自动化部署 java 项目至web集群</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Armin</p>
  <div class="site-description" itemprop="description">记录生活中的点点滴滴</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2020 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Armin</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
